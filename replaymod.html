<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LoverFella Replay Evaluation</title>
    <style>
        :root {
            /* Apple design system colors */
            --primary: #007AFF;
            --primary-light: rgba(0, 122, 255, 0.1);
            --success: #34C759;
            --warning: #FF9500;
            --alert: #FF3B30;
            --system-gray-1: #8E8E93;
            --system-gray-2: #AEAEB2;
            --system-gray-3: #C7C7CC;
            --system-gray-5: #E5E5EA;
            --system-gray-6: #F2F2F7;
            
            /* Light theme */
            --bg-color: #FFFFFF;
            --secondary-bg: #F2F2F7;
            --text-primary: #000000;
            --text-secondary: #8E8E93;
            --border-color: rgba(0, 0, 0, 0.1);
            --card-bg: #FFFFFF;
            --card-shadow: rgba(0, 0, 0, 0.05);
            
            /* Category colors */
            --excellent-color: #34C759; /* Green */
            --great-color: #5AC8FA; /* Blue */
            --good-color: #FF9500; /* Orange */
        }

        [data-theme="dark"] {
            --bg-color: #000000;
            --secondary-bg: #1C1C1E;
            --text-primary: #FFFFFF;
            --text-secondary: #8E8E93;
            --border-color: rgba(255, 255, 255, 0.1);
            --card-bg: #1C1C1E;
            --card-shadow: rgba(0, 0, 0, 0.3);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Helvetica Neue', sans-serif;
            transition: color 0.2s ease, background-color 0.2s ease, transform 0.2s ease, opacity 0.2s ease, box-shadow 0.2s ease;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 24px;
        }
        
        header {
            padding: 16px 0;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            position: sticky;
            top: 0;
            z-index: 100;
            background-color: rgba(255, 255, 255, 0.8);
            border-bottom: 1px solid var(--border-color);
        }
        
        [data-theme="dark"] header {
            background-color: rgba(0, 0, 0, 0.8);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 18px;
            font-weight: 600;
            letter-spacing: -0.2px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .theme-toggle {
            background: none;
            border: none;
            cursor: pointer;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            background-color: var(--secondary-bg);
        }
        
        .theme-toggle:hover {
            transform: scale(1.05);
        }
        
        main {
            padding: 32px 0 80px;
        }
        
        .eval-card {
            background: var(--card-bg);
            border-radius: 14px;
            box-shadow: 0 4px 20px var(--card-shadow);
            overflow: hidden;
            margin-bottom: 36px;
            animation: fadeIn 0.5s ease-out;
        }
        
        .card-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-color);
        }
        
        h1 {
            font-size: 24px;
            font-weight: 600;
            letter-spacing: -0.2px;
            margin-bottom: 8px;
        }
        
        p {
            color: var(--text-secondary);
            font-size: 15px;
            margin-bottom: 0;
        }
        
        .score-summary {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            padding: 18px 24px;
            background-color: var(--secondary-bg);
            border-bottom: 1px solid var(--border-color);
        }
        
        .score-box {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            background-color: var(--bg-color);
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .score-value {
            font-weight: 600;
            font-size: 18px;
            color: var(--primary);
        }
        
        .score-label {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .rating-indicator {
            margin-left: auto;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .rating-good {
            background-color: rgba(255, 149, 0, 0.1);
            color: #FF9500;
        }
        
        .rating-great {
            background-color: rgba(90, 200, 250, 0.1);
            color: #5AC8FA;
        }
        
        .rating-excellent {
            background-color: rgba(52, 199, 89, 0.1);
            color: #34C759;
        }
        
        .rating-outstanding {
            background-color: rgba(255, 45, 85, 0.1);
            color: #FF2D55;
        }
        
        .rubric-container {
            padding: 14px 24px;
        }
        
        .category-row {
            margin-bottom: 20px;
            animation: slideIn 0.3s ease-out;
        }
        
        .category-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .category-name {
            font-weight: 600;
            font-size: 15px;
        }
        
        .category-score {
            margin-left: auto;
            font-weight: 600;
            color: var(--primary);
            font-size: 16px;
        }
        
        .options-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
        
        .option-card {
            position: relative;
            cursor: pointer;
        }
        
        .option-card input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }
        
        .option-content {
            padding: 12px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            min-height: 96px;
            display: flex;
            flex-direction: column;
            transition: all 0.2s ease;
        }
        
        .option-card:hover .option-content {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .option-card input:checked + .option-content {
            border-color: var(--primary);
            background-color: var(--primary-light);
            box-shadow: 0 2px 8px rgba(0, 122, 255, 0.15);
            transform: translateY(-2px);
        }
        
        .option-title {
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 6px;
            color: var(--text-primary);
        }
        
        .option-description {
            font-size: 13px;
            color: var(--text-secondary);
            flex-grow: 1;
        }
        
        /* Column-specific styling */
        .option-good .option-title {
            color: var(--good-color);
        }
        
        .option-great .option-title {
            color: var(--great-color);
        }
        
        .option-excellent .option-title {
            color: var(--excellent-color);
        }
        
        .option-outstanding .option-title {
            color: var(--alert);
        }
        
        .option-card input:checked + .option-good {
            border-color: var(--good-color);
            background-color: rgba(255, 149, 0, 0.1);
        }
        
        .option-card input:checked + .option-great {
            border-color: var(--great-color);
            background-color: rgba(90, 200, 250, 0.1);
        }
        
        .option-card input:checked + .option-excellent {
            border-color: var(--excellent-color);
            background-color: rgba(52, 199, 89, 0.1);
        }
        
        .option-card input:checked + .option-outstanding {
            border-color: var(--alert);
            background-color: rgba(255, 45, 85, 0.1);
        }
        
        .footer-actions {
            padding: 18px 24px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            background-color: var(--secondary-bg);
        }
        
        .btn {
            padding: 10px 16px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: all 0.2s ease;
            border: none;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 122, 255, 0.2);
        }
        
        .btn-secondary {
            background-color: var(--bg-color);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }
        
        .btn svg {
            width: 16px;
            height: 16px;
        }
        
        .result-section {
            display: none;
            margin-top: 30px;
            animation: fadeIn 0.5s ease-out;
        }
        
        .result-card {
            background: var(--card-bg);
            border-radius: 14px;
            box-shadow: 0 4px 20px var(--card-shadow);
            overflow: hidden;
        }
        
        .result-header {
            padding: 24px;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
        }
        
        .result-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .result-score {
            font-size: 48px;
            font-weight: 700;
            color: var(--primary);
            line-height: 1;
            margin: 20px 0;
        }
        
        .result-rating {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 30px;
            font-weight: 600;
            font-size: 14px;
        }
        
        .result-details {
            padding: 24px;
        }
        
        .result-category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        
        .result-category-item {
            background-color: var(--secondary-bg);
            border-radius: 10px;
            padding: 14px;
        }
        
        .result-category-name {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
        }
        
        .result-category-score {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .result-category-value {
            font-weight: 600;
            color: var(--primary);
        }
        
        .result-category-rating {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .result-actions {
            padding: 18px 24px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: center;
            gap: 12px;
            background-color: var(--secondary-bg);
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { transform: translateX(-10px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* Responsive styles */
        @media (max-width: 768px) {
            .options-row {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .score-summary {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .result-category-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .options-row {
                grid-template-columns: 1fr;
            }
            
            .footer-actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon></svg>
                LoverFella Replay Quality Assessment
            </div>
            <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"/></svg>
            </button>
        </div>
    </header>
    
    <main class="container">
        <div class="eval-card">
            <div class="card-header">
                <h1>Replay Quality Rubric</h1>
                <p>Evaluate the footage quality using the criteria below. Select the appropriate rating for each category.</p>
            </div>
            
            <div class="score-summary" id="score-summary">
                <div class="score-box">
                    <div class="score-value" id="total-score">0</div>
                    <div class="score-label">/ 28 points</div>
                </div>
                <div class="rating-indicator" id="rating-indicator">Not rated</div>
            </div>
            
            <div class="rubric-container">
                <form id="replay-evaluation-form">
                    <!-- Composition & Framing -->
                    <div class="category-row" data-delay="0">
                        <div class="category-header">
                            <div class="category-name">Composition & Framing</div>
                            <div class="category-score" id="composition-score">Not rated</div>
                        </div>
                        <div class="options-row">
                            <label class="option-card">
                                <input type="radio" name="composition" value="1">
                                <div class="option-content option-good">
                                    <div class="option-title">Good</div>
                                    <div class="option-description">Basic framing following standard rules but lacking creativity.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="composition" value="2">
                                <div class="option-content option-great">
                                    <div class="option-title">Great</div>
                                    <div class="option-description">Well-balanced composition with clear focal points.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="composition" value="3">
                                <div class="option-content option-excellent">
                                    <div class="option-title">Excellent</div>
                                    <div class="option-description">Exceptionally arranged elements with artistic framing.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="composition" value="4">
                                <div class="option-content option-outstanding">
                                    <div class="option-title">Outstanding</div>
                                    <div class="option-description">Masterful composition that enhances storytelling.</div>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Camera Movement & Stability -->
                    <div class="category-row" data-delay="100">
                        <div class="category-header">
                            <div class="category-name">Camera Movement & Stability</div>
                            <div class="category-score" id="camera-score">Not rated</div>
                        </div>
                        <div class="options-row">
                            <label class="option-card">
                                <input type="radio" name="camera" value="1">
                                <div class="option-content option-good">
                                    <div class="option-title">Good</div>
                                    <div class="option-description">Movement is present but lacks smoothness or intent.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="camera" value="2">
                                <div class="option-content option-great">
                                    <div class="option-title">Great</div>
                                    <div class="option-description">Smooth, deliberate motion that enhances the visual.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="camera" value="3">
                                <div class="option-content option-excellent">
                                    <div class="option-title">Excellent</div>
                                    <div class="option-description">Exceptionally fluid movement that adds dynamic quality.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="camera" value="4">
                                <div class="option-content option-outstanding">
                                    <div class="option-title">Outstanding</div>
                                    <div class="option-description">Cinema-quality movement that perfectly complements content.</div>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Shot Timing & Pacing -->
                    <div class="category-row" data-delay="200">
                        <div class="category-header">
                            <div class="category-name">Shot Timing & Pacing</div>
                            <div class="category-score" id="timing-score">Not rated</div>
                        </div>
                        <div class="options-row">
                            <label class="option-card">
                                <input type="radio" name="timing" value="1">
                                <div class="option-content option-good">
                                    <div class="option-title">Good</div>
                                    <div class="option-description">Timing is acceptable but transitions may seem slightly off.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="timing" value="2">
                                <div class="option-content option-great">
                                    <div class="option-title">Great</div>
                                    <div class="option-description">Well-timed shot with a smooth flow between moments.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="timing" value="3">
                                <div class="option-content option-excellent">
                                    <div class="option-title">Excellent</div>
                                    <div class="option-description">Perfectly paced with seamless transitions that elevate the narrative.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="timing" value="4">
                                <div class="option-content option-outstanding">
                                    <div class="option-title">Outstanding</div>
                                    <div class="option-description">Masterful timing that creates optimal emotional impact.</div>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Lighting, Color & Atmosphere -->
                    <div class="category-row" data-delay="300">
                        <div class="category-header">
                            <div class="category-name">Lighting, Color & Atmosphere</div>
                            <div class="category-score" id="lighting-score">Not rated</div>
                        </div>
                        <div class="options-row">
                            <label class="option-card">
                                <input type="radio" name="lighting" value="1">
                                <div class="option-content option-good">
                                    <div class="option-title">Good</div>
                                    <div class="option-description">Acceptable lighting with only a basic mood established.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="lighting" value="2">
                                <div class="option-content option-great">
                                    <div class="option-title">Great</div>
                                    <div class="option-description">Well-lit scene with appropriate color grading enhancing the mood.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="lighting" value="3">
                                <div class="option-content option-excellent">
                                    <div class="option-title">Excellent</div>
                                    <div class="option-description">Outstanding lighting and color that create an immersive atmosphere.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="lighting" value="4">
                                <div class="option-content option-outstanding">
                                    <div class="option-title">Outstanding</div>
                                    <div class="option-description">Cinematic quality lighting that transports viewers.</div>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Technical Quality & Clarity -->
                    <div class="category-row" data-delay="400">
                        <div class="category-header">
                            <div class="category-name">Technical Quality & Clarity</div>
                            <div class="category-score" id="technical-score">Not rated</div>
                        </div>
                        <div class="options-row">
                            <label class="option-card">
                                <input type="radio" name="technical" value="1">
                                <div class="option-content option-good">
                                    <div class="option-title">Good</div>
                                    <div class="option-description">Adequate quality with minor flaws affecting clarity.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="technical" value="2">
                                <div class="option-content option-great">
                                    <div class="option-title">Great</div>
                                    <div class="option-description">Clear, stable visuals with high-quality technical execution.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="technical" value="3">
                                <div class="option-content option-excellent">
                                    <div class="option-title">Excellent</div>
                                    <div class="option-description">Pristine resolution and stability with flawless technical quality.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="technical" value="4">
                                <div class="option-content option-outstanding">
                                    <div class="option-title">Outstanding</div>
                                    <div class="option-description">Professional broadcast quality with perfect clarity.</div>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Creative Angles & Perspectives -->
                    <div class="category-row" data-delay="500">
                        <div class="category-header">
                            <div class="category-name">Creative Angles & Perspectives</div>
                            <div class="category-score" id="angles-score">Not rated</div>
                        </div>
                        <div class="options-row">
                            <label class="option-card">
                                <input type="radio" name="angles" value="1">
                                <div class="option-content option-good">
                                    <div class="option-title">Good</div>
                                    <div class="option-description">Some creative angles attempted, though not consistently effective.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="angles" value="2">
                                <div class="option-content option-great">
                                    <div class="option-title">Great</div>
                                    <div class="option-description">Well-chosen angles offering fresh perspectives.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="angles" value="3">
                                <div class="option-content option-excellent">
                                    <div class="option-title">Excellent</div>
                                    <div class="option-description">Innovative angles that significantly enhance the shot.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="angles" value="4">
                                <div class="option-content option-outstanding">
                                    <div class="option-title">Outstanding</div>
                                    <div class="option-description">Masterfully crafted angles that redefine how content is viewed.</div>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Overall Cinematic Impact -->
                    <div class="category-row" data-delay="600">
                        <div class="category-header">
                            <div class="category-name">Overall Cinematic Impact</div>
                            <div class="category-score" id="impact-score">Not rated</div>
                        </div>
                        <div class="options-row">
                            <label class="option-card">
                                <input type="radio" name="impact" value="1">
                                <div class="option-content option-good">
                                    <div class="option-title">Good</div>
                                    <div class="option-description">Some impact, but overall unremarkable.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="impact" value="2">
                                <div class="option-content option-great">
                                    <div class="option-title">Great</div>
                                    <div class="option-description">Engaging and leaves a positive impression.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="impact" value="3">
                                <div class="option-content option-excellent">
                                    <div class="option-title">Excellent</div>
                                    <div class="option-description">Exceptionally impressive, evoking strong emotion.</div>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="impact" value="4">
                                <div class="option-content option-outstanding">
                                    <div class="option-title">Outstanding</div>
                                    <div class="option-description">Unforgettable impact that resonates well beyond viewing.</div>
                                </div>
                            </label>
                        </div>
                    </div>
                </form>
            </div>
            
            <div class="footer-actions">
                <button type="button" id="export-btn" class="btn btn-secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                    Export Rubric
                </button>
                <button type="reset" id="reset-btn" class="btn btn-secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path></svg>
                    Reset
                </button>
            </div>
        </div>
        
        <div class="result-section" id="result-section">
            <div class="result-card">
                <div class="result-header">
                    <div class="result-title">Evaluation Results</div>
                    <div class="result-score" id="result-score">0/28</div>
                    <div class="result-rating rating-good" id="result-rating">Good</div>
                </div>
                
                <div class="result-details">
                    <h3>Category Breakdown</h3>
                    <div class="result-category-grid" id="result-categories">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="result-actions">
                    <button type="button" id="copy-btn" class="btn btn-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                        Copy Results
                    </button>
                    <button type="button" id="export-results-btn" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                        Export Results Image
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Theme Toggle
        const themeToggle = document.getElementById('theme-toggle');
        const htmlElement = document.documentElement;
        
        // Check for saved theme preference or use preferred color scheme
        const savedTheme = localStorage.getItem('theme') || 
                          (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        
        // Apply the initial theme
        htmlElement.setAttribute('data-theme', savedTheme);
        updateThemeIcon(savedTheme);
        
        themeToggle.addEventListener('click', () => {
            const currentTheme = htmlElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            htmlElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        });
        
        function updateThemeIcon(theme) {
            if (theme === 'dark') {
                themeToggle.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>';
            } else {
                themeToggle.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"/></svg>';
            }
        }
        
        // Categories for evaluation
        const categories = [
            { name: 'composition', label: 'Composition & Framing' },
            { name: 'camera', label: 'Camera Movement & Stability' },
            { name: 'timing', label: 'Shot Timing & Pacing' },
            { name: 'lighting', label: 'Lighting, Color & Atmosphere' },
            { name: 'technical', label: 'Technical Quality & Clarity' },
            { name: 'angles', label: 'Creative Angles & Perspectives' },
            { name: 'impact', label: 'Overall Cinematic Impact' }
        ];
        
        // Initialize variables
        let totalScore = 0;
        const categoryScores = {};
        const maxPossibleScore = 28; // 7 categories Ã— 4 maximum points
        
        // Add event listeners for real-time score updates
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', updateScores);
        });
        
        // Reset button
        document.getElementById('reset-btn').addEventListener('click', () => {
            // Reset form
            document.getElementById('replay-evaluation-form').reset();
            
            // Reset scores
            totalScore = 0;
            for (const category of categories) {
                categoryScores[category.name] = 0;
                document.getElementById(`${category.name}-score`).textContent = 'Not rated';
            }
            
            // Update display
            document.getElementById('total-score').textContent = '0';
            document.getElementById('rating-indicator').textContent = 'Not rated';
            document.getElementById('rating-indicator').className = 'rating-indicator';
            
            // Hide results section
            document.getElementById('result-section').style.display = 'none';
        });
        
        // Update scores in real-time
        function updateScores() {
            totalScore = 0;
            let allCategoriesRated = true;
            let ratedCategories = 0;
            
            // Calculate score for each category
            categories.forEach(category => {
                const selectedRadio = document.querySelector(`input[name="${category.name}"]:checked`);
                
                if (selectedRadio) {
                    const score = parseInt(selectedRadio.value);
                    categoryScores[category.name] = score;
                    totalScore += score;
                    ratedCategories++;
                    
                    // Update individual category score display
                    const scoreDisplay = document.getElementById(`${category.name}-score`);
                    scoreDisplay.textContent = `${score}/4`;
                } else {
                    allCategoriesRated = false;
                    document.getElementById(`${category.name}-score`).textContent = 'Not rated';
                }
            });
            
            // Update total score
            document.getElementById('total-score').textContent = totalScore;
            
            // Update rating (even if not all categories are rated)
            const ratingIndicator = document.getElementById('rating-indicator');
            if (ratedCategories > 0) {
                let rating;
                if (totalScore >= 25) {
                    rating = 'Outstanding';
                    ratingIndicator.className = 'rating-indicator rating-outstanding';
                } else if (totalScore >= 19) {
                    rating = 'Excellent';
                    ratingIndicator.className = 'rating-indicator rating-excellent';
                } else if (totalScore >= 13) {
                    rating = 'Great';
                    ratingIndicator.className = 'rating-indicator rating-great';
                } else {
                    rating = 'Good';
                    ratingIndicator.className = 'rating-indicator rating-good';
                }
                ratingIndicator.textContent = rating;
            } else {
                ratingIndicator.textContent = 'Not rated';
                ratingIndicator.className = 'rating-indicator';
            }
            
            // Show detailed results if all categories are rated
            if (allCategoriesRated) {
                displayResults();
            }
        } for real-time score updates
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', updateScores);
        });
        
        // Reset button
        document.getElementById('reset-btn').addEventListener('click', () => {
            // Reset form
            document.getElementById('replay-evaluation-form').reset();
            
            // Reset scores
            totalScore = 0;
            for (const category of categories) {
                categoryScores[category.name] = 0;
                document.getElementById(`${category.name}-score`).textContent = 'Not rated';
            }
            
            // Update display
            document.getElementById('total-score').textContent = '0';
            document.getElementById('rating-indicator').textContent = 'Not rated';
            document.getElementById('rating-indicator').className = 'rating-indicator';
            
            // Hide results section
            document.getElementById('result-section').style.display = 'none';
        });
        
        // Update scores in real-time
        function updateScores() {
            totalScore = 0;
            let allCategoriesRated = true;
            let ratedCategories = 0;
            
            // Calculate score for each category
            categories.forEach(category => {
                const selectedRadio = document.querySelector(`input[name="${category.name}"]:checked`);
                
                if (selectedRadio) {
                    const score = parseInt(selectedRadio.value);
                    categoryScores[category.name] = score;
                    totalScore += score;
                    ratedCategories++;
                    
                    // Update individual category score display
                    const scoreDisplay = document.getElementById(`${category.name}-score`);
                    scoreDisplay.textContent = `${score}/5`;
                } else {
                    allCategoriesRated = false;
                    document.getElementById(`${category.name}-score`).textContent = 'Not rated';
                }
            });
            
            // Update total score
            document.getElementById('total-score').textContent = totalScore;
            
            // Update rating (even if not all categories are rated)
            const ratingIndicator = document.getElementById('rating-indicator');
            if (ratedCategories > 0) {
                let rating;
                if (totalScore >= 31) {
                    rating = 'Outstanding';
                    ratingIndicator.className = 'rating-indicator rating-outstanding';
                } else if (totalScore >= 24) {
                    rating = 'Excellent';
                    ratingIndicator.className = 'rating-indicator rating-excellent';
                } else if (totalScore >= 17) {
                    rating = 'Great';
                    ratingIndicator.className = 'rating-indicator rating-great';
                } else {
                    rating = 'Good';
                    ratingIndicator.className = 'rating-indicator rating-good';
                }
                ratingIndicator.textContent = rating;
            } else {
                ratingIndicator.textContent = 'Not rated';
                ratingIndicator.className = 'rating-indicator';
            }
            
            // Show detailed results if all categories are rated
            if (allCategoriesRated) {
                displayResults();
            }
        }
        
        // Display detailed results
        function displayResults() {
            // Set the final score
            document.getElementById('result-score').textContent = `${totalScore}/${maxPossibleScore}`;
            
            // Set the rating
            const resultRating = document.getElementById('result-rating');
            let rating;
            if (totalScore >= 25) {
                rating = 'Outstanding';
                resultRating.className = 'result-rating rating-outstanding';
            } else if (totalScore >= 19) {
                rating = 'Excellent';
                resultRating.className = 'result-rating rating-excellent';
            } else if (totalScore >= 13) {
                rating = 'Great';
                resultRating.className = 'result-rating rating-great';
            } else {
                rating = 'Good';
                resultRating.className = 'result-rating rating-good';
            }
            resultRating.textContent = rating;
            
            // Populate category breakdown
            const resultCategories = document.getElementById('result-categories');
            resultCategories.innerHTML = '';
            
            categories.forEach(category => {
                const score = categoryScores[category.name];
                let categoryRating;
                
                if (score >= 4) categoryRating = 'Outstanding';
                else if (score >= 3) categoryRating = 'Excellent';
                else if (score >= 2) categoryRating = 'Great';
                else categoryRating = 'Good';
                
                const categoryItem = document.createElement('div');
                categoryItem.className = 'result-category-item';
                categoryItem.innerHTML = `
                    <div class="result-category-name">${category.label}</div>
                    <div class="result-category-score">
                        <span class="result-category-value">${score}/4</span>
                        <span class="result-category-rating">${categoryRating}</span>
                    </div>
                `;
                resultCategories.appendChild(categoryItem);
            });
            
            // Show results section
            document.getElementById('result-section').style.display = 'block';
            document.getElementById('result-section').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Export functionality
        document.getElementById('export-btn').addEventListener('click', () => {
            // Create a CSV representation of the rubric
            let csvContent = "Category,Rating,Score,Max Score\n";
            
            categories.forEach(category => {
                const score = categoryScores[category.name] || 0;
                let rating = "Not Rated";
                
                if (score >= 4) rating = "Outstanding";
                else if (score >= 3) rating = "Excellent";
                else if (score >= 2) rating = "Great";
                else if (score >= 1) rating = "Good";
                
                csvContent += `"${category.label}","${rating}",${score},4\n`;
            });
            
            // Add overall score
            let overallRating = "Not Rated";
            if (totalScore >= 25) overallRating = "Outstanding";
            else if (totalScore >= 19) overallRating = "Excellent";
            else if (totalScore >= 13) overallRating = "Great";
            else if (totalScore > 0) overallRating = "Good";
            
            csvContent += `"Overall","${overallRating}",${totalScore},${maxPossibleScore}\n`;
            
            // Create download link
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.setAttribute('download', 'replay_evaluation.csv');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        });
        
        // Copy results
        document.getElementById('copy-btn').addEventListener('click', () => {
            let resultText = "REPLAY QUALITY ASSESSMENT\n\n";
            
            // Overall score
            let overallRating = "Not Rated";
            if (totalScore >= 25) overallRating = "Outstanding";
            else if (totalScore >= 19) overallRating = "Excellent";
            else if (totalScore >= 13) overallRating = "Great";
            else if (totalScore > 0) overallRating = "Good";
            
            resultText += `Overall Score: ${totalScore}/${maxPossibleScore} (${overallRating})\n\n`;
            resultText += "Category Breakdown:\n";
            
            // Add each category
            categories.forEach(category => {
                const score = categoryScores[category.name] || 0;
                let rating = "Not Rated";
                
                if (score >= 4) rating = "Outstanding";
                else if (score >= 3) rating = "Excellent";
                else if (score >= 2) rating = "Great";
                else if (score >= 1) rating = "Good";
                
                resultText += `- ${category.label}: ${score}/4 (${rating})\n`;
            });
            
            navigator.clipboard.writeText(resultText)
                .then(() => {
                    alert("Results copied to clipboard!");
                })
                .catch(err => {
                    console.error("Failed to copy results: ", err);
                    alert("Failed to copy results. Please try again.");
                });
        });
        
        // Add results image export functionality
        document.getElementById('export-results-btn').addEventListener('click', () => {
            // Use html2canvas to capture the results section
            const resultSection = document.getElementById('result-section');
            
            // Display a loading message
            const loadingMsg = document.createElement('div');
            loadingMsg.textContent = 'Generating image...';
            loadingMsg.style.position = 'fixed';
            loadingMsg.style.top = '50%';
            loadingMsg.style.left = '50%';
            loadingMsg.style.transform = 'translate(-50%, -50%)';
            loadingMsg.style.background = 'rgba(0,0,0,0.7)';
            loadingMsg.style.color = 'white';
            loadingMsg.style.padding = '20px';
            loadingMsg.style.borderRadius = '10px';
            loadingMsg.style.zIndex = '9999';
            document.body.appendChild(loadingMsg);
            
            setTimeout(() => {
                // Create an offscreen canvas with additional styling for a better-looking export
                const resultCard = document.querySelector('.result-card');
                const width = resultCard.offsetWidth;
                const height = resultCard.offsetHeight;
                
                const canvas = document.createElement('canvas');
                canvas.width = width;
                canvas.height = height;
                const ctx = canvas.getContext('2d');
                
                // Fill background
                ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--card-bg');
                ctx.fillRect(0, 0, width, height);
                
                // Draw border
                ctx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--border-color');
                ctx.lineWidth = 1;
                ctx.strokeRect(0, 0, width, height);
                
                // Add title
                ctx.font = 'bold 20px -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif';
                ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-primary');
                ctx.textAlign = 'center';
                ctx.fillText('Replay Quality Assessment', width/2, 40);
                
                // Add overall score
                ctx.font = 'bold 48px -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif';
                ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--primary');
                ctx.fillText(`${totalScore}/${maxPossibleScore}`, width/2, 100);
                
                // Add rating
                let overallRating = "Not Rated";
                if (totalScore >= 25) overallRating = "Outstanding";
                else if (totalScore >= 19) overallRating = "Excellent";
                else if (totalScore >= 13) overallRating = "Great";
                else if (totalScore > 0) overallRating = "Good";
                
                ctx.font = 'bold 24px -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif';
                ctx.fillText(overallRating, width/2, 140);
                
                // Add category breakdown title
                ctx.font = 'bold 16px -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif';
                ctx.textAlign = 'left';
                ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-primary');
                ctx.fillText('Category Breakdown:', 30, 180);
                
                // Add categories
                let yPos = 210;
                categories.forEach(category => {
                    const score = categoryScores[category.name] || 0;
                    let rating = "Not Rated";
                    
                    if (score >= 4) rating = "Outstanding";
                    else if (score >= 3) rating = "Excellent";
                    else if (score >= 2) rating = "Great";
                    else if (score >= 1) rating = "Good";
                    
                    ctx.font = '14px -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif';
                    ctx.fillText(`${category.label}:`, 30, yPos);
                    
                    ctx.font = 'bold 14px -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif';
                    ctx.fillText(`${score}/4 (${rating})`, width - 150, yPos);
                    
                    yPos += 25;
                });
                
                // Add date
                const date = new Date();
                ctx.font = '12px -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif';
                ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--text-secondary');
                ctx.fillText(`Evaluated on: ${date.toLocaleDateString()}`, 30, height - 20);
                
                // Convert canvas to image and download
                try {
                    const imgData = canvas.toDataURL('image/png');
                    const link = document.createElement('a');
                    link.href = imgData;
                    link.download = 'replay_evaluation.png';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                } catch (err) {
                    console.error('Error creating image:', err);
                    alert('Failed to generate image. This might be due to security restrictions in your browser.');
                }
                
                // Remove loading message
                document.body.removeChild(loadingMsg);
            }, 100);
        });
        
        // Initialize score display with animation to make it more engaging
        document.addEventListener('DOMContentLoaded', () => {
            // Stagger the animation of each category row
            const categoryRows = document.querySelectorAll('.category-row');
            categoryRows.forEach(row => {
                const delay = parseInt(row.getAttribute('data-delay')) || 0;
                setTimeout(() => {
                    row.style.opacity = 0;
                    row.style.animation = 'slideIn 0.5s ease-out forwards';
                }, delay);
            });
        });
    </script>
</body>
</html>
