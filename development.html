<!DOCTYPE html>
<html lang="en" data-theme="retro">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Development Rubric Analyzer Pro+</title>
    <!-- Retro Monospaced Font (Courier Prime) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
    <!-- html2canvas for PNG export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <style>
      /* ---------- Retro Theme Variables ---------- */
      :root {
        --bg-color: #000000;
        --text-color: #888888;        /* Default gray */
        --panel-bg: #111111;
        --border-color: #888888;
        --primary-color: #33FF33;      /* Neon green when active */
        --highlight-color: #00CC00;
        --shadow: 0 4px 12px rgba(0,0,0,0.7);
        --transition: all 0.3s ease;
        --radius: 4px;
        --font-family: 'Courier Prime', monospace;
      }
      
      /* ---------- Global Styles ---------- */
      body {
        margin: 0;
        padding: 0;
        font-family: var(--font-family);
        background: var(--bg-color);
        color: var(--text-color);
        line-height: 1.6;
      }
      
      header {
        background: var(--panel-bg);
        padding: 1rem 2rem;
        border-bottom: 2px solid var(--border-color);
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: center;
      }
      
      .header-left {
        display: flex;
        flex-direction: column;
        gap: 0.3rem;
      }
      
      .header-left h1 {
        margin: 0;
        font-size: 2rem;
        color: var(--primary-color);
      }
      
      .header-left p {
        margin: 0;
        font-size: 0.9rem;
        color: var(--text-color);
      }
      
      .status-panel, #developerBadge {
        margin-top: 0.5rem;
        font-size: 1.2rem;
        color: var(--text-color);
      }
      
      .header-right {
        display: flex;
        gap: 0.5rem;
      }
      
      /* ---------- Buttons (Default Gray) ---------- */
      .btn {
        background: #444444;
        color: var(--text-color);
        border: 1px solid var(--border-color);
        padding: 0.5rem 1rem;
        border-radius: var(--radius);
        cursor: pointer;
        font-weight: bold;
        transition: var(--transition);
      }
      
      .btn:hover {
        background: var(--primary-color);
        color: var(--bg-color);
        border-color: var(--primary-color);
      }
      
      #exportBtn {
        background: #444444;
        color: var(--text-color);
        border: 1px solid var(--border-color);
        padding: 0.5rem 1rem;
        border-radius: var(--radius);
        cursor: pointer;
        font-weight: bold;
        transition: var(--transition);
      }
      
      #exportBtn:hover {
        background: var(--primary-color);
        color: var(--bg-color);
        border-color: var(--primary-color);
      }
      
      /* ---------- Progress & Status ---------- */
      #progressBarContainer {
        width: 100%;
        height: 20px;
        background: var(--border-color);
        border-radius: 4px;
        margin-top: 0.5rem;
      }
      
      #progressBar {
        height: 100%;
        width: 0%;
        background: var(--primary-color);
        border-radius: 4px;
        transition: width 0.3s ease;
      }
      
      /* ---------- Rubric Table ---------- */
      .rubric-table {
        width: 100%;
        margin: 2rem auto;
        border-collapse: collapse;
        box-shadow: var(--shadow);
      }
      
      .rubric-table th,
      .rubric-table td {
        padding: 0.75rem 1rem;
        border: 1px solid var(--border-color);
        text-align: left;
      }
      
      .rubric-table th {
        background: var(--panel-bg);
        color: var(--text-color);
        position: relative;
      }
      
      /* Tooltip on headers without blocking pointer events */
      .rubric-table th:hover::after {
        content: attr(data-tooltip);
        position: absolute;
        bottom: -1.5rem;
        left: 0;
        background: var(--panel-bg);
        border: 1px solid var(--border-color);
        padding: 2px 5px;
        border-radius: var(--radius);
        font-size: 0.75rem;
        white-space: nowrap;
        color: var(--text-color);
        pointer-events: none;
      }
      
      .rubric-table td {
        background: var(--bg-color);
        color: var(--text-color); /* Default gray text */
      }
      
      .rubric-table td:hover {
        background: var(--highlight-color);
        cursor: pointer;
      }
      
      .rubric-table td.selected {
        background: var(--highlight-color);
        color: var(--primary-color); /* Selected turns neon green */
      }
      
      /* ---------- Legend & Feedback Panels ---------- */
      .panel {
        background: var(--panel-bg);
        border: 1px solid var(--border-color);
        border-radius: var(--radius);
        padding: 1rem;
        margin: 1rem 0;
      }
      
      .panel h3 {
        margin-top: 0;
        color: var(--primary-color);
      }
      
      /* ---------- Terminal Log ---------- */
      #terminalLog {
        background: var(--panel-bg);
        border: 1px solid var(--border-color);
        padding: 0.5rem;
        margin: 1rem 0;
        font-size: 0.85rem;
        height: 100px;
        overflow-y: auto;
      }
      
      /* ---------- Reset Overlay (Retro DOS Reboot Effect) ---------- */
      #resetOverlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 0;
        background: rgba(68, 68, 68, 0.8); /* Semi-transparent gray */
        z-index: 3000;
        pointer-events: none;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: opacity 0.3s ease, height 0.3s ease;
        opacity: 0;
      }
      #resetOverlay.visible {
        height: 100%;
        opacity: 1;
      }
      #resetOverlay::before {
        content: "RESETTING...";
        font-family: var(--font-family);
        color: var(--primary-color);
        font-size: 2rem;
        animation: glitchText 0.4s steps(2, end) infinite;
      }
      @keyframes glitchText {
        0% { opacity: 1; transform: translate(0, 0) skew(0deg, 0deg); }
        50% { opacity: 0.5; transform: translate(2px, -2px) skew(10deg, -10deg); }
        100% { opacity: 1; transform: translate(0, 0) skew(0deg, 0deg); }
      }
      
      /* ---------- Mouse Confetti (Full-Page Falling from Top) ---------- */
      .mouse-particle {
        position: fixed;
        font-size: 24px;
        opacity: 1;
        pointer-events: none;
        animation: mouseFall 3s forwards;
        filter: grayscale(1);
      }
      @keyframes mouseFall {
        0% { transform: translateY(-50px) rotate(0deg); opacity: 1; }
        100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
      }
      
      /* ---------- Game Overlay for Idle Mini-Game ---------- */
      #gameOverlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--bg-color);
        z-index: 3500;
        display: none;
      }
      #gameCanvas {
        display: block;
        margin: 0 auto;
        background: var(--panel-bg);
      }
      
      /* ---------- Responsive ---------- */
      @media (max-width: 768px) {
        header {
          flex-direction: column;
          align-items: flex-start;
        }
        .rubric-table, .panel {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <!-- HEADER -->
    <header>
      <div class="header-left">
        <h1>Development Rubric Analyzer</h1>
        <p>Retro Edition for Minecraft Development Projects</p>
        <div class="status-panel">
          Score: <span id="total">0</span>/28 â€“ <span id="scoreLabel">Good</span>
        </div>
        <div id="progressBarContainer">
          <div id="progressBar"></div>
        </div>
        <div id="developerBadge">Level: 1 â€“ Novice Developer</div>
      </div>
      <div class="header-right">
        <button class="btn" onclick="resetScores()" aria-label="Reset Scores">Reset</button>
        <button class="btn" onclick="exportPNG()" id="exportBtn" aria-label="Export as PNG">Export PNG</button>
      </div>
    </header>

    <!-- MAIN CONTENT -->
    <main>
      <!-- Rubric Table Panel -->
      <section class="panel" aria-label="Development Rubric">
        <h3>Development Rubric</h3>
        <table class="rubric-table">
          <thead>
            <tr>
              <th data-tooltip="Category being evaluated.">Category</th>
              <th data-tooltip="Score 1: Needs improvement.">Good (1)</th>
              <th data-tooltip="Score 2: Adequate, but could be better.">Great (2)</th>
              <th data-tooltip="Score 3: Meets expectations.">Excellent (3)</th>
              <th data-tooltip="Score 4: Outstanding execution.">Outstanding (4)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Code Stability & Testing</strong></td>
              <td data-category="0" data-rating="1" tabindex="0">Minimal testing; frequent crashes</td>
              <td data-category="0" data-rating="2" tabindex="0">Some tests done; occasional issues</td>
              <td data-category="0" data-rating="3" tabindex="0">Well-tested; minor bugs</td>
              <td data-category="0" data-rating="4" tabindex="0">Thoroughly tested; robust and errorâ€‘free</td>
            </tr>
            <tr>
              <td><strong>Clarity & Conciseness</strong></td>
              <td data-category="1" data-rating="1" tabindex="0">Overly verbose; unclear instructions</td>
              <td data-category="1" data-rating="2" tabindex="0">Some clarity issues; too much extraneous detail</td>
              <td data-category="1" data-rating="3" tabindex="0">Clear instructions; concise documentation</td>
              <td data-category="1" data-rating="4" tabindex="0">Exceptionally clear; precise and streamlined</td>
            </tr>
            <tr>
              <td><strong>Visual Presentation</strong></td>
              <td data-category="2" data-rating="1" tabindex="0">Unappealing UI; inconsistent styles</td>
              <td data-category="2" data-rating="2" tabindex="0">Basic formatting; lacks polish</td>
              <td data-category="2" data-rating="3" tabindex="0">Wellâ€‘designed; appealing color/text choices</td>
              <td data-category="2" data-rating="4" tabindex="0">Visually outstanding; professional and engaging</td>
            </tr>
            <tr>
              <td><strong>Efficiency & Timeliness</strong></td>
              <td data-category="3" data-rating="1" tabindex="0">Overâ€‘engineered; delays common</td>
              <td data-category="3" data-rating="2" tabindex="0">Sometimes offâ€‘schedule; minor delays</td>
              <td data-category="3" data-rating="3" tabindex="0">Timely delivery; meets deadlines consistently</td>
              <td data-category="3" data-rating="4" tabindex="0">Efficient and punctual; exceeds expectations</td>
            </tr>
            <tr>
              <td><strong>Production Requirements</strong></td>
              <td data-category="4" data-rating="1" tabindex="0">Key elements missing; not productionâ€‘ready</td>
              <td data-category="4" data-rating="2" tabindex="0">Mostly complete; some gaps in requirements</td>
              <td data-category="4" data-rating="3" tabindex="0">Meets requirements; minor adjustments needed</td>
              <td data-category="4" data-rating="4" tabindex="0">Fully compliant; optimally prepared for production</td>
            </tr>
            <tr>
              <td><strong>Creativity & Problem Solving</strong></td>
              <td data-category="5" data-rating="1" tabindex="0">Conventional; lacks innovative solutions</td>
              <td data-category="5" data-rating="2" tabindex="0">Some creative elements; standard approaches</td>
              <td data-category="5" data-rating="3" tabindex="0">Creative and effective problemâ€‘solving</td>
              <td data-category="5" data-rating="4" tabindex="0">Exceptionally innovative; smart, elegant solutions</td>
            </tr>
            <tr>
              <td><strong>Documentation & Backups</strong></td>
              <td data-category="6" data-rating="1" tabindex="0">Poor or missing documentation/backups</td>
              <td data-category="6" data-rating="2" tabindex="0">Basic documentation; backups not fully reliable</td>
              <td data-category="6" data-rating="3" tabindex="0">Clear documentation; adequate backups</td>
              <td data-category="6" data-rating="4" tabindex="0">Comprehensive documentation; robust backup procedures</td>
            </tr>
          </tbody>
        </table>
      </section>
      
      <!-- Terminal Log Panel -->
      <section class="panel" aria-label="Terminal Log">
        <h3>Terminal Log</h3>
        <div id="terminalLog"></div>
      </section>
      
      <!-- Feedback Panel -->
      <section class="panel" aria-label="Feedback">
        <h3>Feedback</h3>
        <div class="feedback-entry">
          <label for="humanFeedback">Human Feedback</label>
          <div id="humanFeedback" class="feedback-input" contenteditable="true" data-placeholder="Enter your feedback here..."></div>
        </div>
        <div class="feedback-entry">
          <label for="aiFeedback">AI Feedback</label>
          <div id="aiFeedback" class="feedback-input" contenteditable="true" data-placeholder="Enter AI feedback here..."></div>
        </div>
      </section>
    </main>
    
    <!-- Reset Overlay for Retro Reboot Animation -->
    <div id="resetOverlay"></div>
    
    <!-- Game Overlay for Idle Mini-Game -->
    <div id="gameOverlay">
      <canvas id="gameCanvas" width="640" height="480"></canvas>
    </div>
    
    <!-- Mouse Confetti Container for "Excellent" Celebration -->
    <div id="mouseConfettiContainer"></div>
    
    <script>
      /***************************************************
       * Global Variables & Idle/Game Setup
       ***************************************************/
      let scores = {};
      const maxPoints = 28;
      let confettiShown = false;
      const STORAGE_KEY = "developmentRubricScores";
      let excellentCelebrated = false;
      let idleTimeout;
      let gameInterval;
      let currentGame; // "snake" or "tetris"
      
      /* ----------------------------
         Terminal Log Functionality 
      ---------------------------- */
      function logToTerminal(message) {
        const logDiv = document.getElementById("terminalLog");
        const timeStamp = new Date().toLocaleTimeString();
        logDiv.innerHTML += `&gt;&gt; [${timeStamp}] ${message}<br>`;
        logDiv.scrollTop = logDiv.scrollHeight;
      }
      
      /* ----------------------------
         Developer Badge Level-Up
      ---------------------------- */
      function updateDeveloperBadge(total) {
        const badge = document.getElementById("developerBadge");
        let level = 1, title = "Novice Developer";
        if (total < 9) { level = 1; title = "Novice Developer"; }
        else if (total < 17) { level = 2; title = "Code Wrangler"; }
        else if (total < 25) { level = 3; title = "Debugging Guru"; }
        else { level = 4; title = "Development Master"; }
        badge.textContent = `Level: ${level} â€“ ${title}`;
      }
      
      /* ----------------------------
         Idle Detection & Game Overlay 
      ---------------------------- */
      function resetIdleTimer() {
        clearTimeout(idleTimeout);
        hideGameOverlay();
        idleTimeout = setTimeout(() => {
          // Randomly choose a game mode
          currentGame = Math.random() < 0.5 ? "snake" : "tetris";
          startGameMode(currentGame);
        }, 30000); // 30 seconds idle
      }
      document.addEventListener("mousemove", resetIdleTimer);
      document.addEventListener("keydown", resetIdleTimer);
      document.addEventListener("click", resetIdleTimer);
      document.addEventListener("touchstart", resetIdleTimer);
      resetIdleTimer();
      
      function startGameMode(mode) {
        const overlay = document.getElementById("gameOverlay");
        overlay.style.display = "block";
        if (mode === "snake") {
          logToTerminal("Idle detected: Starting Snake game. Use arrow keys to control.");
          startSnakeGame();
        } else {
          logToTerminal("Idle detected: Starting Tetris game. Use arrow keys to move/rotate.");
          startTetrisGame();
        }
      }
      
      function hideGameOverlay() {
        clearInterval(gameInterval);
        const overlay = document.getElementById("gameOverlay");
        overlay.style.display = "none";
        const canvas = document.getElementById("gameCanvas");
        if (canvas) {
          const ctx = canvas.getContext("2d");
          ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
      }
      
      /* ----------------------------
         Snake Game Implementation 
      ---------------------------- */
      function startSnakeGame() {
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const gridSize = 20;
        const tileCountX = canvas.width / gridSize;
        const tileCountY = canvas.height / gridSize;
        let snake = [{ x: Math.floor(tileCountX/2), y: Math.floor(tileCountY/2) }];
        let direction = { x: 0, y: 0 };
        let food = { x: Math.floor(Math.random() * tileCountX), y: Math.floor(Math.random() * tileCountY) };
        
        function draw() {
          ctx.fillStyle = "#000000";
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          ctx.fillStyle = varPrimary();
          snake.forEach(cell => {
            ctx.fillRect(cell.x * gridSize, cell.y * gridSize, gridSize-2, gridSize-2);
          });
          ctx.fillStyle = "#FF3333";
          ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize-2, gridSize-2);
        }
        
        function update() {
          const head = { x: snake[0].x + direction.x, y: snake[0].y + direction.y };
          head.x = (head.x + tileCountX) % tileCountX;
          head.y = (head.y + tileCountY) % tileCountY;
          snake.unshift(head);
          if (head.x === food.x && head.y === food.y) {
            food = { x: Math.floor(Math.random() * tileCountX), y: Math.floor(Math.random() * tileCountY) };
            logToTerminal("Snake: Food consumed. New food generated.");
          } else {
            snake.pop();
          }
          for (let i = 1; i < snake.length; i++) {
            if (snake[i].x === head.x && snake[i].y === head.y) {
              logToTerminal("Snake: Collision detected. Game over.");
              hideGameOverlay();
              return;
            }
          }
          draw();
        }
        
        function varPrimary() {
          return getComputedStyle(document.documentElement).getPropertyValue('--primary-color').trim();
        }
        
        document.addEventListener("keydown", snakeKeyDown);
        function snakeKeyDown(e) {
          switch(e.key) {
            case "ArrowUp": if (direction.y !== 1) direction = { x: 0, y: -1 }; break;
            case "ArrowDown": if (direction.y !== -1) direction = { x: 0, y: 1 }; break;
            case "ArrowLeft": if (direction.x !== 1) direction = { x: -1, y: 0 }; break;
            case "ArrowRight": if (direction.x !== -1) direction = { x: 1, y: 0 }; break;
            case "Escape": hideGameOverlay(); break;
          }
        }
        
        gameInterval = setInterval(update, 150);
      }
      
      /* ----------------------------
         Tetris Game Implementation 
         (Simplified Version)
      ---------------------------- */
      function startTetrisGame() {
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const gridSize = 30;
        const cols = 10, rows = 20;
        let arena = createMatrix(cols, rows);
        let player = { pos: { x: Math.floor(cols/2)-1, y: 0 }, matrix: createPiece() };
        
        document.addEventListener("keydown", tetrisKeyDown);
        function tetrisKeyDown(e) {
          if (e.key === "ArrowLeft") { player.pos.x--; }
          else if (e.key === "ArrowRight") { player.pos.x++; }
          else if (e.key === "ArrowDown") { player.pos.y++; }
          else if (e.key === "ArrowUp") { player.matrix = rotate(player.matrix, 1); }
          else if (e.key === "Escape") { hideGameOverlay(); }
        }
        
        function createMatrix(w, h) {
          const matrix = [];
          for (let i = 0; i < h; i++) {
            matrix.push(new Array(w).fill(0));
          }
          return matrix;
        }
        
        function createPiece() {
          const pieces = [
            [[1,1],[1,1]], // O-piece
            [[0,1,0],[1,1,1]], // T-piece
            [[1,1,0],[0,1,1]]  // S-piece
          ];
          return pieces[Math.floor(Math.random() * pieces.length)];
        }
        
        function rotate(matrix, dir) {
          for (let y = 0; y < matrix.length; ++y) {
            for (let x = 0; x < y; ++x) {
              [matrix[x][y], matrix[y][x]] = [matrix[y][x], matrix[x][y]];
            }
          }
          if (dir > 0) { matrix.forEach(row => row.reverse()); }
          else { matrix.reverse(); }
          return matrix;
        }
        
        function draw() {
          ctx.fillStyle = "#000000";
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          drawMatrix(player.matrix, player.pos);
        }
        
        function drawMatrix(matrix, offset) {
          matrix.forEach((row, y) => {
            row.forEach((value, x) => {
              if (value !== 0) {
                ctx.fillStyle = "#FF9933";
                ctx.fillRect((x + offset.x) * gridSize, (y + offset.y) * gridSize, gridSize-2, gridSize-2);
              }
            });
          });
        }
        
        function merge(arena, player) {
          player.matrix.forEach((row, y) => {
            row.forEach((value, x) => {
              if (value !== 0) {
                arena[y + player.pos.y][x + player.pos.x] = value;
              }
            });
          });
        }
        
        function collide(arena, player) {
          const m = player.matrix;
          const o = player.pos;
          for (let y = 0; y < m.length; ++y) {
            for (let x = 0; x < m[y].length; ++x) {
              if (m[y][x] !== 0 &&
                  (arena[y + o.y] && arena[y + o.y][x + o.x]) !== 0) {
                return true;
              }
            }
          }
          return false;
        }
        
        function playerReset() {
          player.matrix = createPiece();
          player.pos.y = 0;
          player.pos.x = Math.floor(cols/2) - 1;
          if (collide(arena, player)) {
            logToTerminal("Tetris: Game over.");
            hideGameOverlay();
          }
        }
        
        function updateTetris() {
          player.pos.y++;
          if (collide(arena, player)) {
            player.pos.y--;
            merge(arena, player);
            playerReset();
          }
          draw();
        }
        
        draw();
        gameInterval = setInterval(updateTetris, 500);
      }
      
      /* ----------------------------
         Reset Scores with Retro Reset Animation 
      ---------------------------- */
      function resetScores() {
        const resetOverlay = document.getElementById("resetOverlay");
        resetOverlay.classList.add("visible");
        logToTerminal("System reboot initiated...");
        setTimeout(() => {
          scores = {};
          localStorage.removeItem(STORAGE_KEY);
          document.querySelectorAll(".rubric-table td[data-rating]").forEach(cell => cell.classList.remove("selected"));
          document.getElementById("total").textContent = "0";
          document.getElementById("scoreLabel").textContent = "Good";
          document.getElementById("progressBar").style.width = "0%";
          confettiShown = false;
          excellentCelebrated = false;
          updateDeveloperBadge(0);
          resetOverlay.classList.remove("visible");
          logToTerminal("System reboot complete.");
        }, 800);
      }
      
      /* ----------------------------
         Export Rubric as PNG 
      ---------------------------- */
      async function exportPNG() {
        const header = document.querySelector("header");
        const originalPos = header.style.position;
        header.style.position = "static";
        const canvas = await html2canvas(document.body, { scale: 2, useCORS: true });
        const dataUrl = canvas.toDataURL("image/png");
        const link = document.createElement("a");
        link.download = "development-analysis.png";
        link.href = dataUrl;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        header.style.position = originalPos;
      }
      
      /* ----------------------------
         Toggle Dark/Light Theme 
      ---------------------------- */
      function toggleTheme(input) {
        const htmlEl = document.documentElement;
        if (input.checked) { htmlEl.setAttribute("data-theme", "retro"); }
        else { htmlEl.setAttribute("data-theme", "light"); }
      }
      
      /* ----------------------------
         Update Developer Badge 
      ---------------------------- */
      function updateDeveloperBadge(total) {
        let level = 1, title = "Novice Developer";
        if (total < 9) { level = 1; title = "Novice Developer"; }
        else if (total < 17) { level = 2; title = "Code Wrangler"; }
        else if (total < 25) { level = 3; title = "Debugging Guru"; }
        else { level = 4; title = "Development Master"; }
        document.getElementById("developerBadge").textContent = `Level: ${level} â€“ ${title}`;
      }
      
      /* ----------------------------
         Update Total Score & Terminal Log 
      ---------------------------- */
      function updateTotal() {
        const total = Object.values(scores).reduce((sum, val) => sum + val, 0);
        document.getElementById("total").textContent = total;
        let label = "";
        if (total >= 25) { label = "Outstanding"; confettiShown = true; }
        else if (total >= 17) { label = "Excellent"; confettiShown = false; if (!excellentCelebrated) { launchMouseConfetti(); excellentCelebrated = true; } }
        else if (total >= 9) { label = "Great"; confettiShown = false; }
        else { label = "Good"; confettiShown = false; }
        document.getElementById("scoreLabel").textContent = label;
        updateProgressBar(total);
        updateDeveloperBadge(total);
        logToTerminal(`Score updated to ${total} (${label}).`);
      }
      
      /* ----------------------------
         Update Progress Bar 
      ---------------------------- */
      function updateProgressBar(total) {
        const percentage = (total / maxPoints) * 100;
        document.getElementById("progressBar").style.width = percentage + "%";
      }
      
      /* ----------------------------
         Mouse Confetti for "Excellent" Celebration 
         (Full-Page Falling from Top)
      ---------------------------- */
      function launchMouseConfetti() {
        const container = document.getElementById("mouseConfettiContainer");
        const particleCount = 30;
        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement("span");
          particle.className = "mouse-particle";
          particle.textContent = "ðŸ–±";
          particle.style.left = Math.random() * 100 + "vw";
          particle.style.top = "-50px";
          particle.style.animationDelay = Math.random() * 0.5 + "s";
          container.appendChild(particle);
          setTimeout(() => { particle.remove(); }, 3000);
        }
      }
    </script>
  </body>
</html>
