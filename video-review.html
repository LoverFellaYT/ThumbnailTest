<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Editing Review Pro+ (Final)</title>

    <!-- Font Awesome for editing icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      integrity="sha512-Fo3rlrZj/k7ujTnH/PRRZ9i6Lkxy/lK+Ad+Qw3PweIIsXgTn5N2sA3ZgP6L6YKn42pPZLNSQNkI3b7HlFj5pAg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Roboto Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
      rel="stylesheet"
    />

    <!-- html2canvas for PNG Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- Canvas Confetti for Outstanding Score Effect -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>

    <style>
      /* CSS Variables & Base Styles */
      :root {
        --primary-light: #4facfe;
        --accent-light: #00f2fe;
        --bg-light: #f9fafb;
        --text-light: #1e293b;
        --panel-light: rgba(255, 255, 255, 0.96);
        --border-light: rgba(255, 255, 255, 0.2);
        --shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
        --transition: all 0.2s ease;
        --radius: 14px;
        --gradient-light: linear-gradient(135deg, var(--primary-light) 0%, var(--accent-light) 100%);
        --spacing: 1rem;
        --font-base: 'Roboto', sans-serif;
        --table-cell-bg-light: rgba(255, 255, 255, 0.85);
      }

      /* Dark Mode Variables */
      html[data-theme="dark"] {
        --bg-light: #1f1f1f;
        --text-light: #f3f3f3;
        --panel-light: rgba(18, 18, 18, 0.98);
        --border-light: rgba(255, 255, 255, 0.2);
        --gradient-light: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        --table-cell-bg-light: rgba(30, 30, 30, 0.85);
      }

      /* Reduce motion class disables animations & transitions */
      body.reduce-motion *,
      body.reduce-motion *::before,
      body.reduce-motion *::after {
        animation: none !important;
        transition: none !important;
      }

      /* Base styles */
      body {
        margin: 0;
        padding: 0;
        font-family: var(--font-base);
        background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px), var(--bg-light);
        background-size: 30px 30px;
        color: var(--text-light);
        transition: var(--transition);
      }

      button:focus,
      [tabindex]:focus {
        outline: 2px solid var(--accent-light);
      }

      /* Panels */
      .glass-panel {
        background: var(--panel-light);
        border: 1px solid var(--border-light);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        backdrop-filter: blur(12px);
        padding: var(--spacing);
        margin-bottom: var(--spacing);
      }

      /* HEADER with Disney-inspired golden glow */
      header.analyzer-header {
        position: sticky;
        top: 0;
        z-index: 2000;
        padding: 1.5rem 2rem;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        animation: disneyMagic 3s infinite alternate;
      }
      @keyframes disneyMagic {
        from { box-shadow: 0 0 10px rgba(255,215,0,0.5); }
        to { box-shadow: 0 0 30px rgba(255,215,0,1); }
      }

      .header-left {
        display: flex;
        flex-direction: column;
        gap: 0.4rem;
      }
      /* Site Title with Film Icon */
      .site-title {
        font-size: 1.8rem;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      .site-title i {
        color: var(--accent-light);
      }
      .total-score {
        font-size: 1.75rem;
        font-weight: 700;
        background: var(--gradient-light);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        position: relative;
        cursor: default;
        transition: var(--transition);
      }
      .total-score:hover::after {
        content: "Combined Score: Intro (0/28) + Editing (0/40) = Overall (0/68)";
        position: absolute;
        background: rgba(0, 0, 0, 0.8);
        color: #fff;
        padding: 0.5rem;
        border-radius: 4px;
        top: 110%;
        left: 0;
        white-space: pre-line;
        font-size: 0.85rem;
        z-index: 1000;
      }
      .status-indicator {
        font-weight: 600;
      }
      .header-right {
        display: flex;
        align-items: center;
        gap: 1rem;
        flex-wrap: wrap;
      }
      .header-right .group {
        display: flex;
        align-items: center;
        gap: 1rem;
      }
      /* New Reduce Motion Toggle */
      .reduce-motion-toggle {
        display: inline-flex;
        align-items: center;
        gap: 0.3rem;
        font-size: 0.9rem;
      }

      .btn {
        background: var(--gradient-light);
        color: #fff;
        border: none;
        padding: 0.6rem 1.2rem;
        border-radius: var(--radius);
        cursor: pointer;
        font-weight: 600;
        transition: var(--transition);
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        box-shadow: 0 4px 6px rgba(126, 34, 206, 0.2);
      }
      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(126, 34, 206, 0.4);
      }

      /* Dark Mode Slider */
      .dark-mode { }
      .toggle-label.dark-mode-label {
        cursor: pointer;
        display: inline-flex;
        align-items: center;
      }
      .dark-mode-slider {
        position: relative;
        width: 60px;
        height: 30px;
        background-color: #e0e0e0;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 5px;
        transition: background-color 0.3s;
      }
      .dark-mode-slider .mode-label {
        font-size: 16px;
      }
      .dark-mode-slider .slider-thumb {
        position: absolute;
        width: 26px;
        height: 26px;
        background: white;
        border-radius: 50%;
        top: 2px;
        left: 2px;
        transition: transform 0.3s;
      }
      input#darkModeToggle { display: none; }
      input#darkModeToggle:checked + .dark-mode-slider .slider-thumb {
        transform: translateX(30px);
      }
      input#darkModeToggle:checked + .dark-mode-slider {
        background-color: var(--primary-light);
      }

      /* Quote Section (Top) */
      .quote-section {
        text-align: center;
        margin: 1rem auto;
        font-style: italic;
        padding: 0.5rem;
        background: var(--panel-light);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        animation: fadeIn 0.8s ease-in-out;
        max-width: 800px;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
      }

      /* Main Content */
      main {
        margin: var(--spacing) auto;
      }
      .analyzer-container {
        width: 95%;
        max-width: 1200px;
        margin: 2rem auto;
        padding: 0 var(--spacing) 2rem;
      }

      /* Rubric Table */
      .rubric-table {
        margin-bottom: var(--spacing);
        overflow-x: auto;
      }
      .modern-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        font-family: var(--font-base);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        border-radius: var(--radius);
        overflow: hidden;
        transition: var(--transition);
      }
      .modern-table thead th {
        padding: 0.75rem 1.5rem;
        font-weight: 600;
        position: sticky;
        top: 0;
        backdrop-filter: blur(10px);
        z-index: 10;
      }
      .modern-table thead th:first-child {
        background: var(--gradient-light);
        color: #fff;
      }
      /* Rating Columns */
      .modern-table thead th:nth-child(2) { background: #f87171; }
      .modern-table thead th:nth-child(3) { background: #fb923c; }
      .modern-table thead th:nth-child(4) { background: #facc15; }
      .modern-table thead th:nth-child(5) { background: #4ade80; }
      .modern-table tbody td {
        padding: 0.75rem 1.5rem;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        transition: var(--transition);
        vertical-align: middle;
        min-width: 150px;
        cursor: pointer;
        background: var(--table-cell-bg-light);
      }
      /* Microinteractions on Rubric Cells */
      .modern-table tbody td:hover {
        transform: scale(1.02);
        background-color: rgba(224, 231, 255, 0.3);
      }
      .modern-table tbody tr:hover td {
        background-color: rgba(0, 0, 0, 0.03);
      }
      .modern-table td.selected {
        background: rgba(224, 231, 255, 0.5) !important;
        box-shadow: inset 4px 0 0 var(--primary-light);
      }
      .category-header {
        font-weight: bold;
      }

      /* Feedback Panel */
      .feedback-panel h3 { margin-top: 0; }
      .feedback-panel .feedback-entry { margin-bottom: var(--spacing); }
      .feedback-panel label {
        font-weight: 600;
        display: block;
        margin-bottom: 0.3rem;
      }
      .feedback-input {
        display: block;
        width: 100%;
        max-width: 600px;
        box-sizing: border-box;
        min-height: 80px;
        padding: var(--spacing);
        border: 2px solid #e2e8f0;
        border-radius: var(--radius);
        font-size: 1rem;
        transition: var(--transition);
        white-space: pre-wrap;
        word-wrap: break-word;
        overflow: auto;
      }
      .feedback-input:focus {
        outline: none;
        border-color: var(--primary-light);
        box-shadow: 0 0 0 3px rgba(126, 34, 206, 0.2);
      }
      .feedback-input:empty::before {
        content: attr(data-placeholder);
        color: #9ca3af;
      }

      /* Legend & Definitions */
      #toggleLegend {
        margin: var(--spacing) 0;
        padding: 0.4rem 0.8rem;
        background: var(--gradient-light);
        color: #fff;
        border: none;
        border-radius: var(--radius);
        cursor: pointer;
        transition: var(--transition);
      }
      #toggleLegend:hover { opacity: 0.9; }
      #legend {
        display: none;
        margin-top: 0.5rem;
        font-size: 0.9rem;
        line-height: 1.4;
        background: var(--panel-light);
        border: 1px solid var(--border-light);
        border-radius: var(--radius);
        padding: var(--spacing);
      }
      #legend h4 { margin-top: 0; }

      /* Self-Assessment Checklist Section */
      .self-assessment-section {
        background: var(--panel-light);
        border: 1px solid var(--border-light);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: var(--spacing);
        margin: 1rem auto;
        max-width: 800px;
      }
      .self-assessment-section h3 {
        text-align: center;
        margin-top: 0;
      }
      .self-assessment-section ul {
        list-style: none;
        padding-left: 0;
      }
      .self-assessment-section li {
        margin: 0.5rem 0;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      .self-assessment-section input[type="checkbox"] {
        transform: scale(1.2);
        cursor: pointer;
      }
      .assessment-result {
        text-align: center;
        font-weight: bold;
        margin-top: var(--spacing);
      }

      /* Fun Fact Section (Bottom) */
      .fun-fact-section {
        text-align: center;
        margin: 1rem auto;
        font-style: italic;
        padding: 0.5rem;
        background: var(--panel-light);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        animation: fadeIn 0.8s ease-in-out;
        max-width: 800px;
      }

      /* Disney Magic Easter Egg Icon */
      #disneyMagic {
        position: fixed;
        bottom: 10px;
        right: 10px;
        cursor: pointer;
        font-size: 2em;
        z-index: 10000;
        animation: pulse 2s infinite;
      }
      @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
      }

      /* Modal Styles ‚Äì Using semantic <dialog> for better accessibility */
      .modal-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.7);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        padding: var(--spacing);
      }
      .modal-bg.show {
        display: flex;
        animation: fadeIn 0.3s ease-in-out;
      }
      .modal-content {
        position: relative;
        background: #fff;
        border-radius: var(--radius);
        max-width: 90%;
        max-height: 90%;
        overflow-y: auto;
        padding: 1.5rem;
      }
      .close-btn {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 50%;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        cursor: pointer;
      }
      .close-btn:hover {
        background: rgba(255, 255, 255, 1);
      }

      /* Responsive */
      @media (max-width: 992px) {
        .analyzer-container { padding: 0 1rem 2rem; }
      }
    </style>
  </head>
  <body>
    <!-- HEADER -->
    <header class="analyzer-header glass-panel">
      <div class="header-left">
        <div class="site-title">
          <i class="fas fa-film" aria-hidden="true"></i>
          <span>Editing Review Pro+</span>
        </div>
        <div class="total-score" id="scoreDisplay" tabindex="0">
          Intro: <span id="introTotal">0</span>/28, Editing: <span id="editingTotal">0</span>/40, Overall: <span id="overallTotal">0</span>/68 ‚Äì <span id="scoreLabel">Good</span>
        </div>
        <div class="status-indicator" id="ranking" aria-live="polite">Incomplete</div>
      </div>
      <div class="header-right">
        <div class="group">
          <button class="btn" onclick="resetScores()" aria-label="Reset Scores">üîÑ Reset</button>
          <button class="btn" onclick="exportPNG()" aria-label="Export as PNG">üñºÔ∏è Export PNG</button>
          <button class="btn" onclick="openHowTo()" aria-label="How To Use">‚ùì How To</button>
        </div>
        <!-- Dark Mode Toggle -->
        <div class="dark-mode">
          <label class="toggle-label dark-mode-label" for="darkModeToggle">
            <input type="checkbox" id="darkModeToggle" onchange="toggleTheme(this)" aria-label="Toggle Dark Mode" />
            <div class="dark-mode-slider">
              <span class="mode-label mode-light">‚òÄÔ∏è</span>
              <span class="mode-label mode-dark">üåô</span>
              <div class="slider-thumb"></div>
            </div>
          </label>
        </div>
        <!-- Reduce Motion Toggle -->
        <div class="reduce-motion-toggle">
          <label for="reduceMotionToggle">Reduce Motion</label>
          <input type="checkbox" id="reduceMotionToggle" onchange="toggleAnimations(this)" aria-label="Toggle Reduce Motion" />
        </div>
      </div>
    </header>

    <!-- QUOTE OF WISDOM SECTION (Top) -->
    <div class="quote-section glass-panel" id="quoteSection" role="note" aria-live="polite">
      <!-- A random inspirational quote will appear here -->
    </div>

    <main>
      <div class="analyzer-container">
        <!-- INTRO RUBRIC SECTION -->
        <section class="rubric-table glass-panel" aria-labelledby="introRubricHeading">
          <h2 id="introRubricHeading">Intro Review Rubric</h2>
          <table class="modern-table" id="introTable">
            <thead>
              <tr>
                <th scope="col">Category</th>
                <th scope="col">Needs Improvement (1)</th>
                <th scope="col">Good (2)</th>
                <th scope="col">Excellent (3)</th>
                <th scope="col">Outstanding (4)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="category-header" data-category="0"><strong>üîî Hook & Clarity</strong></td>
                <td data-category="0" data-rating="1" role="button" tabindex="0">
                  Intro feels confusing or unrelated to the video‚Äôs topic; fails to capture attention.
                </td>
                <td data-category="0" data-rating="2" role="button" tabindex="0">
                  Intro connects somewhat to the video‚Äôs topic but doesn‚Äôt strongly hook the viewer.
                </td>
                <td data-category="0" data-rating="3" role="button" tabindex="0">
                  Grabs the viewer‚Äôs attention right away and clearly conveys the theme.
                </td>
                <td data-category="0" data-rating="4" role="button" tabindex="0">
                  Riveting opener that instantly captivates and intrigues the audience.
                </td>
              </tr>
              <tr>
                <td class="category-header" data-category="1"><strong>üè∑Ô∏è Branding & Style</strong></td>
                <td data-category="1" data-rating="1" role="button" tabindex="0">
                  Lacks brand identity; inconsistent colors, fonts, or style elements.
                </td>
                <td data-category="1" data-rating="2" role="button" tabindex="0">
                  Basic use of logos/colors but not memorable or cohesive.
                </td>
                <td data-category="1" data-rating="3" role="button" tabindex="0">
                  Clean, on-brand visuals that match the channel‚Äôs identity and theme.
                </td>
                <td data-category="1" data-rating="4" role="button" tabindex="0">
                  Distinct, polished branding with a cohesive style that‚Äôs instantly recognizable.
                </td>
              </tr>
              <tr>
                <td class="category-header" data-category="2"><strong>üé• Visual Appeal & Editing</strong></td>
                <td data-category="2" data-rating="1" role="button" tabindex="0">
                  Rough animation or design; transitions are jarring or nonexistent.
                </td>
                <td data-category="2" data-rating="2" role="button" tabindex="0">
                  Acceptable visuals with minor issues; transitions are basic.
                </td>
                <td data-category="2" data-rating="3" role="button" tabindex="0">
                  Smooth, visually appealing graphics; transitions flow well.
                </td>
                <td data-category="2" data-rating="4" role="button" tabindex="0">
                  Cinematic-level visuals, seamless transitions, and innovative motion graphics.
                </td>
              </tr>
              <tr>
                <td class="category-header" data-category="3"><strong>üéµ Audio & Music</strong></td>
                <td data-category="3" data-rating="1" role="button" tabindex="0">
                  Music (if any) is low-quality, too loud/soft, or poorly timed.
                </td>
                <td data-category="3" data-rating="2" role="button" tabindex="0">
                  Background track is okay but may not perfectly match the intro‚Äôs energy.
                </td>
                <td data-category="3" data-rating="3" role="button" tabindex="0">
                  Well-chosen track or sound design that complements the visuals.
                </td>
                <td data-category="3" data-rating="4" role="button" tabindex="0">
                  Exceptional audio design; music & sound effects are perfectly timed.
                </td>
              </tr>
              <tr>
                <td class="category-header" data-category="4"><strong>‚è≥ Length & Pacing</strong></td>
                <td data-category="4" data-rating="1" role="button" tabindex="0">
                  Intro drags on or ends abruptly; pacing feels off.
                </td>
                <td data-category="4" data-rating="2" role="button" tabindex="0">
                  Length is somewhat appropriate but may be slightly too long or rushed.
                </td>
                <td data-category="4" data-rating="3" role="button" tabindex="0">
                  Well-paced, keeps viewers engaged without overstaying its welcome.
                </td>
                <td data-category="4" data-rating="4" role="button" tabindex="0">
                  Perfectly timed; holds attention and transitions smoothly into main content.
                </td>
              </tr>
              <tr>
                <td class="category-header" data-category="5"><strong>üí¨ Message & Relevance</strong></td>
                <td data-category="5" data-rating="1" role="button" tabindex="0">
                  No clear message or purpose; viewer may be unsure of the video‚Äôs focus.
                </td>
                <td data-category="5" data-rating="2" role="button" tabindex="0">
                  The purpose is somewhat clear, but the intro might not fully align.
                </td>
                <td data-category="5" data-rating="3" role="button" tabindex="0">
                  Conveys a strong, relevant message and sets up expectations.
                </td>
                <td data-category="5" data-rating="4" role="button" tabindex="0">
                  Masterfully aligns with the video‚Äôs content, building anticipation and context.
                </td>
              </tr>
              <tr>
                <td class="category-header" data-category="6"><strong>üîÑ Transition to Main Content</strong></td>
                <td data-category="6" data-rating="1" role="button" tabindex="0">
                  Abrupt or jarring switch from intro to main segment.
                </td>
                <td data-category="6" data-rating="2" role="button" tabindex="0">
                  Somewhat smooth switch but may lack elegance.
                </td>
                <td data-category="6" data-rating="3" role="button" tabindex="0">
                  Flows naturally into the main content; transition is smooth.
                </td>
                <td data-category="6" data-rating="4" role="button" tabindex="0">
                  Seamless transition that maintains momentum and excites the viewer.
                </td>
              </tr>
            </tbody>
          </table>
        </section>

        <!-- EDITING RUBRIC SECTION -->
        <section class="rubric-table glass-panel" aria-labelledby="editingRubricHeading">
          <h2 id="editingRubricHeading">Editing Review Rubric</h2>
          <table class="modern-table" id="editingTable">
            <thead>
              <tr>
                <th scope="col">Category</th>
                <th scope="col">Good (1)</th>
                <th scope="col">Great (2)</th>
                <th scope="col">Excellent (3)</th>
                <th scope="col">Outstanding (4)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="category-header" data-category="0"><strong>üåü Overall Impact</strong></td>
                <td data-category="0" data-rating="1" role="button" tabindex="0">
                  Meets basic requirements but lacks significant emotional or creative impact.
                </td>
                <td data-category="0" data-rating="2" role="button" tabindex="0">
                  Engaging edit with noticeable creative effort.
                </td>
                <td data-category="0" data-rating="3" role="button" tabindex="0">
                  Highly effective editing that enhances content impact.
                </td>
                <td data-category="0" data-rating="4" role="button" tabindex="0">
                  Masterful editing that captivates, evokes strong emotions, and drives action.
                </td>
              </tr>
              <tr>
                <td class="category-header" data-category="1"><strong>üé¨ Narrative Flow & Storytelling</strong></td>
                <td data-category="1" data-rating="1" role="button" tabindex="0">
                  The video has a general structure but suffers from logical gaps or abrupt cuts.
                </td>
                <td data-category="1" data-rating="2" role="button" tabindex="0">
                  Follows a recognizable narrative with occasional lapses.
                </td>
                <td data-category="1" data-rating="3" role="button" tabindex="0">
                  Engaging narrative with clear sequencing and supportive transitions.
                </td>
                <td data-category="1" data-rating="4" role="button" tabindex="0">
                  Seamless storytelling that captivates and emotionally engages the audience.
                </td>
              </tr>
              <tr>
                <td class="category-header" data-category="2"><strong>‚úÇÔ∏è Cutting & Transitions</strong></td>
                <td data-category="2" data-rating="1" role="button" tabindex="0">
                  Cuts are basic and sometimes jarring.
                </td>
                <td data-category="2" data-rating="2" role="button" tabindex="0">
                  Cuts complement the narrative with few disruptions.
                </td>
                <td data-category="2" data-rating="3" role="button" tabindex="0">
                  Smooth transitions that enhance pacing and continuity.
                </td>
                <td data-category="2" data-rating="4" role="button" tabindex="0">
                  Precise cuts with creative transitions that elevate the edit.
                </td>
              </tr>
              <tr>
                <td class="category-header" data-category="3"><strong>‚è±Ô∏è Pacing & Timing</strong></td>
                <td data-category="3" data-rating="1" role="button" tabindex="0">
                  Pacing is uneven; scenes feel rushed or dragged out.
                </td>
                <td data-category="3" data-rating="2" role="button" tabindex="0">
                  Generally consistent pacing with minor issues.
                </td>
                <td data-category="3" data-rating="3" role="button" tabindex="0">
                  Well-managed pacing that holds viewer interest.
                </td>
                <td data-category="3" data-rating="4" role="button" tabindex="0">
                  Exemplary timing that fully engages the audience.
                </td>
              </tr>
              <tr>
                <td class="category-header" data-category="4"><strong>üíª Technical Quality & Export</strong></td>
                <td data-category="4" data-rating="1" role="button" tabindex="0">
                  Export is acceptable but may have compression artifacts or aspect ratio issues.
                </td>
                <td data-category="4" data-rating="2" role="button" tabindex="0">
                  Good export quality with minor technical imperfections.
                </td>
                <td data-category="4" data-rating="3" role="button" tabindex="0">
                  High-quality export meeting industry standards.
                </td>
                <td data-category="4" data-rating="4" role="button" tabindex="0">
                  Exceptional technical quality with pristine resolution and flawless export.
                </td>
              </tr>
              <tr>
                <td class="category-header" data-category="5"><strong>üìñ Story/Content Engagement</strong></td>
                <td data-category="5" data-rating="1" role="button" tabindex="0">
                  Content is passable but fails to engage or clarify the message.
                </td>
                <td data-category="5" data-rating="2" role="button" tabindex="0">
                  Content is engaging with a clear message, though may lack depth.
                </td>
                <td data-category="5" data-rating="3" role="button" tabindex="0">
                  Compelling content that resonates with the audience.
                </td>
                <td data-category="5" data-rating="4" role="button" tabindex="0">
                  Exceptionally engaging content that inspires and deeply resonates.
                </td>
              </tr>
              <tr>
                <td class="category-header" data-category="6"><strong>üéµ Use of Music & Sound Design</strong></td>
                <td data-category="6" data-rating="1" role="button" tabindex="0">
                  Music and sound are present but poorly balanced or distracting.
                </td>
                <td data-category="6" data-rating="2" role="button" tabindex="0">
                  Music and sound moderately enhance the video, with minor balance issues.
                </td>
                <td data-category="6" data-rating="3" role="button" tabindex="0">
                  Well-integrated sound design with balanced music and effects.
                </td>
                <td data-category="6" data-rating="4" role="button" tabindex="0">
                  Exemplary sound design that elevates the emotional and narrative impact.
                </td>
              </tr>
              <tr>
                <td class="category-header" data-category="7"><strong>üé® Visual Effects & Graphics</strong></td>
                <td data-category="7" data-rating="1" role="button" tabindex="0">
                  Graphics are basic and do little to enhance the visual experience.
                </td>
                <td data-category="7" data-rating="2" role="button" tabindex="0">
                  Effective use of lower-thirds and overlays that support the content.
                </td>
                <td data-category="7" data-rating="3" role="button" tabindex="0">
                  High-quality graphics that enhance storytelling.
                </td>
                <td data-category="7" data-rating="4" role="button" tabindex="0">
                  Cinematic visual effects that elevate the production to an exceptional level.
                </td>
              </tr>
              <tr>
                <td class="category-header" data-category="8"><strong>‚ú® Motion Graphics / Animated Elements</strong></td>
                <td data-category="8" data-rating="1" role="button" tabindex="0">
                  Animated elements are minimal or rudimentary.
                </td>
                <td data-category="8" data-rating="2" role="button" tabindex="0">
                  Basic animations are used effectively.
                </td>
                <td data-category="8" data-rating="3" role="button" tabindex="0">
                  Creative animations that enhance visual storytelling.
                </td>
                <td data-category="8" data-rating="4" role="button" tabindex="0">
                  Innovative animated elements that add a dynamic, polished feel.
                </td>
              </tr>
              <tr>
                <td class="category-header" data-category="9"><strong>üìù On-Screen Text & Titles</strong></td>
                <td data-category="9" data-rating="1" role="button" tabindex="0">
                  On-screen text is minimal or inconsistently styled.
                </td>
                <td data-category="9" data-rating="2" role="button" tabindex="0">
                  Titles and captions are clear but could be more consistent.
                </td>
                <td data-category="9" data-rating="3" role="button" tabindex="0">
                  Well-designed text that supports and clarifies the message.
                </td>
                <td data-category="9" data-rating="4" role="button" tabindex="0">
                  Exemplary on-screen text that is stylish, clear, and powerfully reinforces the message.
                </td>
              </tr>
            </tbody>
          </table>
          <button id="toggleLegend" onclick="toggleLegend()">Show Legend & Definitions</button>
          <div id="legend">
            <h4>Legend & Definitions</h4>
            <p><strong>Overall Impact:</strong> Measures engagement, emotional resonance, creativity, and call-to-action strength.</p>
            <p><strong>Narrative Flow & Storytelling:</strong> Evaluates the structure and clarity of the story.</p>
            <p><strong>Cutting & Transitions:</strong> Assesses how seamlessly cuts support the narrative.</p>
            <p><strong>Pacing & Timing:</strong> Ensures the edit maintains a consistent, engaging rhythm.</p>
            <p><strong>Technical Quality & Export:</strong> Reviews resolution, aspect ratio, and absence of artifacts.</p>
            <p><strong>Story/Content Engagement:</strong> Measures how compelling and resonant the content is.</p>
            <p><strong>Use of Music & Sound Design:</strong> Evaluates the integration and balance of audio elements.</p>
            <p><strong>Visual Effects & Graphics:</strong> Considers the quality of graphics and visual enhancements.</p>
            <p><strong>Motion Graphics / Animated Elements:</strong> Assesses creativity and effectiveness of animations.</p>
            <p><strong>On-Screen Text & Titles:</strong> Evaluates clarity, style, and support of on-screen text.</p>
            <h5>Rating Levels</h5>
            <ul>
              <li><strong>Good (1):</strong> Meets basic requirements with noticeable shortcomings.</li>
              <li><strong>Great (2):</strong> Solid execution with minor areas for improvement.</li>
              <li><strong>Excellent (3):</strong> Professional quality with only slight refinements needed.</li>
              <li><strong>Outstanding (4):</strong> Exceeds industry standards with exceptional execution.</li>
            </ul>
          </div>
        </section>

        <!-- FEEDBACK PANEL -->
        <section class="feedback-panel glass-panel" aria-labelledby="feedbackHeading">
          <h3 id="feedbackHeading">Feedback</h3>
          <div class="feedback-entry">
            <label for="humanFeedback">Human Feedback</label>
            <div id="humanFeedback" class="feedback-input" contenteditable="true" data-placeholder="Enter your human feedback here..." aria-label="Human Feedback"></div>
          </div>
          <div class="feedback-entry">
            <label for="aiFeedback">AI Feedback</label>
            <div id="aiFeedback" class="feedback-input" contenteditable="true" data-placeholder="Enter your AI feedback here..." aria-label="AI Feedback"></div>
          </div>
        </section>
      </div>

      <!-- SELF-ASSESSMENT CHECKLIST SECTION -->
      <section class="self-assessment-section" aria-labelledby="selfAssessmentHeading">
        <h3 id="selfAssessmentHeading">Self-Assessment Checklist</h3>
        <ul>
          <li><input type="checkbox" id="check1"> <label for="check1">Did you confirm that all voiceovers match on-screen graphics?</label></li>
          <li><input type="checkbox" id="check2"> <label for="check2">Have you normalized audio so the volume is consistent?</label></li>
          <li><input type="checkbox" id="check3"> <label for="check3">Are all transitions smooth and visually appealing?</label></li>
          <li><input type="checkbox" id="check4"> <label for="check4">Did you verify that on-screen text and titles are clear and free of typos?</label></li>
          <li><input type="checkbox" id="check5"> <label for="check5">Is the overall narrative clear, engaging, and well-paced?</label></li>
          <li><input type="checkbox" id="check6"> <label for="check6">Have you double-checked technical quality (resolution, aspect ratio, frame rate)?</label></li>
          <li><input type="checkbox" id="check7"> <label for="check7">Did you incorporate creative editing elements that enhance the story?</label></li>
          <li><input type="checkbox" id="check8"> <label for="check8">Have you confirmed that the use of music and sound design elevates the video?</label></li>
        </ul>
        <button class="btn" onclick="submitAssessment()">Submit Self-Assessment</button>
        <div class="assessment-result" id="assessmentResult" aria-live="polite"></div>
      </section>

      <!-- FUN FACT SECTION (Bottom) -->
      <div class="fun-fact-section glass-panel" id="funFactSection" role="note" aria-live="polite">
        <!-- A random fun fact or tip will appear here -->
      </div>
    </main>

    <!-- HOW-TO MODAL -->
    <dialog class="modal-bg" id="howToModal" aria-labelledby="howToHeading" aria-modal="true">
      <div class="modal-content">
        <button class="close-btn" onclick="closeHowTo()" aria-label="Close How To">&times;</button>
        <h2 id="howToHeading">How to Use Editing Review Pro+</h2>
        <ul>
          <li>Review each Intro and Editing criterion by clicking on the appropriate rating cell.</li>
          <li>The Intro and Editing scores update live and combine to give an Overall Score.</li>
          <li>Read the daily Quote of Wisdom for inspiration and a touch of Disney magic.</li>
          <li>Provide additional feedback in the Human and AI feedback boxes.</li>
          <li>Use the Self-Assessment Checklist to evaluate your own work.</li>
          <li>When finished, you can reset scores or export the review as a PNG.</li>
        </ul>
      </div>
    </dialog>

    <!-- TUTORIAL MODAL -->
    <dialog class="modal-bg" id="tutorialModal" aria-labelledby="tutorialHeading" aria-modal="true">
      <div class="modal-content">
        <button class="close-btn" onclick="closeTutorial()" aria-label="Close Tutorial">&times;</button>
        <div id="tutorialContent"></div>
      </div>
    </dialog>

    <!-- Hidden Audio Elements for Sound Effects -->
    <audio id="victorySound" src="victory.mp3"></audio>
    <audio id="wompSound" src="womp.mp3"></audio>

    <!-- DISNEY MAGIC EASTER EGG ICON -->
    <div id="disneyMagic" title="Click for a little Disney Magic!">‚ú®</div>

    <script>
      /***************************************************
       * Global Variables & Milestones
       ***************************************************/
      let introScores = {};
      let editingScores = {};
      let confettiShown = false;
      let milestoneTriggered = {}; // For overall score (max = 68)
      const milestoneMessages = {
        17: "Initial review complete!",
        34: "Halfway to perfection!",
        51: "Almost there‚Äîgreat editing!",
        68: "Editing Master: Outstanding work!"
      };
      const progressAudio = {
        victory: document.getElementById("victorySound"),
        womp: document.getElementById("wompSound")
      };

      // Array of inspirational quotes
      const editorQuotes = [
        "‚ÄúIn film editing, it's not about what you add, it's about what you leave out.‚Äù ‚Äì Walter Murch",
        "‚ÄúCutting is rewriting.‚Äù ‚Äì Thelma Schoonmaker",
        "‚ÄúEditing is where the magic happens.‚Äù ‚Äì Unknown",
        "‚ÄúGood editing is invisible; great editing is felt.‚Äù ‚Äì Unknown",
        "‚ÄúIn editing, less is often more.‚Äù ‚Äì Unknown",
        "‚ÄúAll our dreams can come true if we have the courage to pursue them.‚Äù ‚Äì Walt Disney",
        "‚ÄúIt's kind of fun to do the impossible.‚Äù ‚Äì Walt Disney",
        "‚ÄúThe past can hurt. But the way I see it, you can either run from it, or learn from it.‚Äù ‚Äì Rafiki, The Lion King",
        "‚ÄúCinema is truth at 24 frames per second.‚Äù ‚Äì Jean-Luc Godard",
        "‚ÄúThe secret to film editing is knowing when to cut.‚Äù ‚Äì Unknown",
        "‚ÄúEvery cut tells a story.‚Äù ‚Äì Unknown",
        "‚ÄúEditing is the craft of transforming raw footage into art.‚Äù ‚Äì Unknown",
        "‚ÄúA good cut is a silent hero.‚Äù ‚Äì Unknown",
        "‚ÄúWhen you're editing, you're not just cutting footage; you're sculpting a story.‚Äù ‚Äì Unknown",
        "‚ÄúThe technique of film editing is to be invisible.‚Äù ‚Äì Walter Murch",
        "‚ÄúThe art of editing is the art of omission.‚Äù ‚Äì Elia Kazan",
        "‚ÄúI‚Äôm convinced that nothing happens in the editing room.‚Äù ‚Äì Francis Ford Coppola",
        "‚ÄúMay your edits be as magical as pixie dust.‚Äù ‚Äì Inspired by Disney",
        "‚ÄúIf you can dream it, you can do it.‚Äù ‚Äì Walt Disney",
        "‚ÄúThe way to get started is to quit talking and begin doing.‚Äù ‚Äì Walt Disney"
      ];

      // Array of fun facts and tips
      const funFacts = [
        "Did you know? 'Apocalypse Now' went through over 80 different edits before the final cut!",
        "Fun Tip: Trust your gut‚Äîif a cut feels off, try a different approach.",
        "Great editing can transform mundane footage into cinematic art.",
        "Sometimes, a well-timed pause speaks louder than action-packed sequences.",
        "Experiment with transitions‚Äîcreative cuts can set your edit apart!"
      ];

      /***************************************************
       * DOMContentLoaded Setup
       ***************************************************/
      document.addEventListener("DOMContentLoaded", () => {
        // Set a random inspirational quote, ensuring it's different from the last one
        const lastQuote = localStorage.getItem("lastQuoteIndex");
        let newQuoteIndex;
        do {
          newQuoteIndex = Math.floor(Math.random() * editorQuotes.length);
        } while (editorQuotes.length > 1 && newQuoteIndex == lastQuote);
        localStorage.setItem("lastQuoteIndex", newQuoteIndex);
        document.getElementById("quoteSection").innerText = editorQuotes[newQuoteIndex];

        // Set a random fun fact
        document.getElementById("funFactSection").innerText = funFacts[Math.floor(Math.random() * funFacts.length)];

        // Event delegation for Intro Rubric table
        document.getElementById("introTable").addEventListener("click", function(e) {
          const cell = e.target.closest('td[data-rating]');
          if (cell) selectIntroRating(cell);
        });
        // Event delegation for Editing Rubric table
        document.getElementById("editingTable").addEventListener("click", function(e) {
          const cell = e.target.closest('td[data-rating]');
          if (cell) selectEditingRating(cell);
        });

        // Add click event for the Disney Magic icon
        document.getElementById("disneyMagic").addEventListener("click", triggerDisneyMagic);
      });

      /***************************************************
       * Rubric Functions
       ***************************************************/
      function selectIntroRating(cell) {
        const categoryIndex = Number(cell.getAttribute('data-category'));
        const rating = parseInt(cell.getAttribute('data-rating'));
        const row = cell.parentElement;
        row.querySelectorAll('td').forEach(td => {
          if (td !== row.firstElementChild) td.classList.remove('selected');
        });
        cell.classList.add('selected');
        introScores[categoryIndex] = rating;
        updateTotals();
      }

      function selectEditingRating(cell) {
        const categoryIndex = Number(cell.getAttribute('data-category'));
        const rating = parseInt(cell.getAttribute('data-rating'));
        const row = cell.parentElement;
        row.querySelectorAll('td').forEach(td => {
          if (td !== row.firstElementChild) td.classList.remove('selected');
        });
        cell.classList.add('selected');
        editingScores[categoryIndex] = rating;
        updateTotals();
      }

      function updateTotals() {
        let introTotal = Object.values(introScores).reduce((a, b) => a + b, 0);
        let editingTotal = Object.values(editingScores).reduce((a, b) => a + b, 0);
        let overallTotal = introTotal + editingTotal;
        document.getElementById('introTotal').textContent = introTotal;
        document.getElementById('editingTotal').textContent = editingTotal;
        document.getElementById('overallTotal').textContent = overallTotal;
        let scoreLabel = document.getElementById('scoreLabel');
        let ranking = document.getElementById('ranking');
        // Ensure all Intro (7 factors) and Editing (10 factors) items are rated
        if (Object.keys(introScores).length < 7 || Object.keys(editingScores).length < 10) {
          ranking.textContent = "Incomplete";
          ranking.style.color = "#64748b";
        } else if (overallTotal < 17) {
          scoreLabel.textContent = "Good";
          ranking.textContent = "Needs Work üî¥";
          ranking.style.color = "#ef4444";
          progressAudio.womp.play && progressAudio.womp.play();
        } else if (overallTotal < 34) {
          scoreLabel.textContent = "Great";
          ranking.textContent = "Great! üü¢";
          ranking.style.color = "#22c55e";
        } else if (overallTotal < 51) {
          scoreLabel.textContent = "Excellent";
          ranking.textContent = "Excellent üü°";
          ranking.style.color = "#eab308";
        } else {
          scoreLabel.textContent = "Outstanding";
          ranking.textContent = "Outstanding üîµ";
          ranking.style.color = "#3b82f6";
          progressAudio.victory.play && progressAudio.victory.play();
          if (!confettiShown) {
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            confettiShown = true;
          }
        }
      }

      /***************************************************
       * Reset Function
       ***************************************************/
      function resetScores() {
        introScores = {};
        editingScores = {};
        document.querySelectorAll('#introTable td[data-rating]').forEach(cell => cell.classList.remove('selected'));
        document.querySelectorAll('#editingTable td[data-rating]').forEach(cell => cell.classList.remove('selected'));
        document.getElementById('introTotal').textContent = '0';
        document.getElementById('editingTotal').textContent = '0';
        document.getElementById('overallTotal').textContent = '0';
        document.getElementById('scoreLabel').textContent = 'Good';
        document.getElementById('ranking').textContent = 'Incomplete';
        milestoneTriggered = {};
        confettiShown = false;
      }

      /***************************************************
       * Export Function (PNG)
       ***************************************************/
      async function exportPNG() {
        const header = document.querySelector("header.analyzer-header");
        const originalPosition = header.style.position;
        header.style.position = "static";
        const canvas = await html2canvas(document.body, { scale: 2, useCORS: true });
        const dataUrl = canvas.toDataURL('image/png');
        const link = document.createElement('a');
        link.download = 'editing-review.png';
        link.href = dataUrl;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        header.style.position = originalPosition;
      }

      /***************************************************
       * Theme & Animation Toggle Functions
       ***************************************************/
      function toggleTheme(input) {
        const html = document.documentElement;
        if (input.checked) {
          html.setAttribute("data-theme", "dark");
        } else {
          html.removeAttribute("data-theme");
        }
      }
      function toggleAnimations(input) {
        if (input.checked) {
          document.body.classList.add("reduce-motion");
        } else {
          document.body.classList.remove("reduce-motion");
        }
      }

      /***************************************************
       * Modal Functions ‚Äì Using <dialog> for better semantics
       ***************************************************/
      function openHowTo() {
        const dialog = document.getElementById("howToModal");
        dialog.showModal();
        // Move focus to the close button
        dialog.querySelector(".close-btn").focus();
      }
      function closeHowTo() {
        document.getElementById("howToModal").close();
      }
      function openTutorial(topic) {
        const tutorialContent = document.getElementById('tutorialContent');
        let content = "";
        if (topic === 'narrative') {
          content = "<h2>Enhancing Narrative Flow</h2><p>Focus on the pacing and sequence of shots. Experiment with different cuts to build a compelling story.</p>";
        } else if (topic === 'transitions') {
          content = "<h2>Smooth Transitions</h2><p>Use creative but purposeful transitions. Avoid jarring cuts unless intentionally stylistic.</p>";
        } else if (topic === 'technical') {
          content = "<h2>Technical Quality</h2><p>Export in high resolution with proper compression to preserve quality across devices.</p>";
        } else if (topic === 'overall') {
          content = "<h2>Overall Impact</h2><p>Strive for a final edit that not only informs but also emotionally engages your audience.</p>";
        } else {
          content = "<h2>Tutorial</h2><p>No tutorial available for this topic.</p>";
        }
        tutorialContent.innerHTML = content;
        const dialog = document.getElementById("tutorialModal");
        dialog.showModal();
        dialog.querySelector(".close-btn").focus();
      }
      function closeTutorial() {
        document.getElementById("tutorialModal").close();
      }
      function toggleLegend() {
        const legend = document.getElementById("legend");
        const btn = document.getElementById("toggleLegend");
        if (legend.style.display === "none" || legend.style.display === "") {
          legend.style.display = "block";
          btn.textContent = "Hide Legend & Definitions";
        } else {
          legend.style.display = "none";
          btn.textContent = "Show Legend & Definitions";
        }
      }

      /***************************************************
       * Self-Assessment Checklist Functions
       ***************************************************/
      function submitAssessment() {
        const checklist = document.querySelectorAll('.self-assessment-section input[type="checkbox"]');
        let checkedCount = 0;
        checklist.forEach(box => {
          if (box.checked) checkedCount++;
        });
        const totalItems = checklist.length;
        let resultText = `You checked ${checkedCount} out of ${totalItems} items. `;
        if (checkedCount === totalItems) {
          resultText += "üéâ Master Editor Badge: You are a true editing wizard!";
          confetti({ particleCount: 200, spread: 100, origin: { y: 0.5 } });
        } else if (checkedCount >= totalItems * 0.75) {
          resultText += "Great job! You're almost there.";
        } else {
          resultText += "Keep refining your work for that perfect edit.";
        }
        document.getElementById("assessmentResult").innerText = resultText;
      }

      /***************************************************
       * Disney Magic Easter Egg Function
       ***************************************************/
      function triggerDisneyMagic() {
        confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
        const disneyQuotes = [
          "‚ÄúAll our dreams can come true if we have the courage to pursue them.‚Äù ‚Äì Walt Disney",
          "‚ÄúIt's kind of fun to do the impossible.‚Äù ‚Äì Walt Disney",
          "‚ÄúThe way to get started is to quit talking and begin doing.‚Äù ‚Äì Walt Disney",
          "‚ÄúIf you can dream it, you can do it.‚Äù ‚Äì Walt Disney",
          "‚ÄúThe more you like yourself, the less you are like anyone else, which makes you unique.‚Äù ‚Äì Walt Disney"
        ];
        const randomIndex = Math.floor(Math.random() * disneyQuotes.length);
        alert(disneyQuotes[randomIndex]);
      }

      /***************************************************
       * Easter Egg Shortcut (Alt+E)
       ***************************************************/
      document.addEventListener("keydown", function(e) {
        if (e.altKey && e.key.toLowerCase() === "e") {
          triggerDisneyMagic();
        }
      });
    </script>
  </body>
</html>
