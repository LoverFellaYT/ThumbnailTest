<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Editing Review Pro+ (Final)</title>

    <!-- Font Awesome for editing icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnH/PRRZ9i6Lkxy/lK+Ad+Qw3PweIIsXgTn5N2sA3ZgP6L6YKn42pPZLNSQNkI3b7HlFj5pAg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Roboto Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
      rel="stylesheet"
    />

    <!-- html2canvas for PNG Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- Canvas Confetti for Outstanding Score Effect -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>

    <style>
      :root {
        /* Colors & Theme Variables */
        --primary-light: #4facfe;
        --accent-light: #00f2fe;
        --bg-light: #f9fafb;
        --text-light: #1e293b;
        --panel-light: rgba(255, 255, 255, 0.96);
        --border-light: rgba(255, 255, 255, 0.2);
        --shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
        --transition: all 0.2s ease;
        --radius: 14px;
        --gradient-light: linear-gradient(135deg, var(--primary-light) 0%, var(--accent-light) 100%);
        /* Table Colors */
        --table-cell-bg-light: rgba(255, 255, 255, 0.85);
      }

      html[data-theme="dark"] {
        --bg-light: #1f1f1f;
        --text-light: #f3f3f3;
        --panel-light: rgba(18, 18, 18, 0.98);
        --border-light: rgba(255, 255, 255, 0.2);
        --gradient-light: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        --primary-light: #4facfe;
        --accent-light: #00f2fe;
        --table-cell-bg-light: rgba(30, 30, 30, 0.85);
      }

      /* Body with a subtle starry (pixie dust) background */
      body {
        margin: 0;
        padding: 0;
        font-family: 'Roboto', system-ui, -apple-system, sans-serif;
        background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px), var(--bg-light);
        background-size: 30px 30px;
        color: var(--text-light);
        transition: var(--transition);
      }

      button:focus,
      [tabindex]:focus {
        outline: 2px solid var(--accent-light);
      }

      /* Panels */
      .glass-panel {
        background: var(--panel-light);
        border: 1px solid var(--border-light);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        backdrop-filter: blur(12px);
        transition: var(--transition);
        padding: 1rem;
        margin-bottom: 1rem;
      }

      /* HEADER with Disney-inspired golden glow */
      header.analyzer-header {
        position: sticky;
        top: 0;
        z-index: 2000;
        padding: 1.5rem 2rem;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        animation: disneyMagic 3s infinite alternate;
      }
      @keyframes disneyMagic {
        from { box-shadow: 0 0 10px rgba(255,215,0,0.5); }
        to { box-shadow: 0 0 30px rgba(255,215,0,1); }
      }

      .header-left {
        display: flex;
        flex-direction: column;
        gap: 0.4rem;
      }
      /* Site Title with Film Icon */
      .site-title {
        font-size: 1.8rem;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      .site-title i {
        color: var(--accent-light);
      }
      .total-score {
        font-size: 1.75rem;
        font-weight: 700;
        background: var(--gradient-light);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        transition: var(--transition);
        position: relative;
        cursor: default;
      }
      .total-score:hover::after {
        content: "Your video editing is rated on 10 factors, each up to 4 points, for a total of 40.\A31‚Äì40: Outstanding\A21‚Äì30: Excellent\A11‚Äì20: Great\A<11: Good";
        position: absolute;
        background: rgba(0, 0, 0, 0.8);
        color: #fff;
        padding: 0.5rem;
        border-radius: 4px;
        top: 110%;
        left: 0;
        white-space: pre-line;
        font-size: 0.85rem;
        z-index: 1000;
      }
      .status-indicator {
        font-weight: 600;
      }
      .header-right {
        display: flex;
        align-items: center;
        gap: 1rem;
        flex-wrap: wrap;
      }
      .header-right .group {
        display: flex;
        align-items: center;
        gap: 1rem;
      }
      .btn {
        background: var(--gradient-light);
        color: #fff;
        border: none;
        padding: 0.6rem 1.2rem;
        border-radius: var(--radius);
        cursor: pointer;
        font-weight: 600;
        transition: var(--transition);
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        box-shadow: 0 4px 6px rgba(126, 34, 206, 0.2);
      }
      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(126, 34, 206, 0.4);
        opacity: 0.9;
      }
      /* Dark Mode Slider */
      .dark-mode { }
      .toggle-label.dark-mode-label {
        cursor: pointer;
        display: inline-flex;
        align-items: center;
      }
      .dark-mode-slider {
        position: relative;
        width: 60px;
        height: 30px;
        background-color: #e0e0e0;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 5px;
        transition: background-color 0.3s;
      }
      .dark-mode-slider .mode-label {
        font-size: 16px;
      }
      .dark-mode-slider .slider-thumb {
        position: absolute;
        width: 26px;
        height: 26px;
        background: white;
        border-radius: 50%;
        top: 2px;
        left: 2px;
        transition: transform 0.3s;
      }
      input#darkModeToggle { display: none; }
      input#darkModeToggle:checked + .dark-mode-slider .slider-thumb {
        transform: translateX(30px);
      }
      input#darkModeToggle:checked + .dark-mode-slider {
        background-color: var(--primary-light);
      }

      /* Quote Section (Top) with fade-in */
      .quote-section {
        text-align: center;
        margin: 1rem auto;
        font-style: italic;
        padding: 0.5rem;
        background: var(--panel-light);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        animation: fadeIn 0.8s ease-in-out;
        max-width: 800px;
      }

      /* MAIN CONTAINER */
      .analyzer-container {
        width: 95%;
        max-width: 1200px;
        margin: 2rem auto;
        padding: 0 1rem 2rem;
      }

      /* Rubric Table */
      .rubric-table {
        margin-bottom: 1rem;
        overflow-x: auto;
      }
      .modern-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        font-family: 'Roboto', sans-serif;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        overflow: hidden;
        transition: transform 0.2s ease;
      }
      .modern-table thead th {
        padding: 0.75rem 1.5rem;
        font-weight: 600;
        position: sticky;
        top: 0;
        backdrop-filter: blur(10px);
        z-index: 10;
      }
      .modern-table thead th:first-child {
        background: var(--gradient-light);
        color: #fff;
      }
      /* Rating Columns */
      .modern-table thead th:nth-child(2) { background: #f87171; }
      .modern-table thead th:nth-child(3) { background: #fb923c; }
      .modern-table thead th:nth-child(4) { background: #facc15; }
      .modern-table thead th:nth-child(5) { background: #4ade80; }
      .modern-table tbody td {
        padding: 0.75rem 1.5rem;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        transition: var(--transition);
        vertical-align: middle;
        min-width: 150px;
        cursor: pointer;
        background: var(--table-cell-bg-light);
      }
      .modern-table tbody tr:hover td {
        background-color: rgba(0, 0, 0, 0.03);
      }
      .modern-table td.selected {
        background: rgba(224, 231, 255, 0.5) !important;
        box-shadow: inset 4px 0 0 var(--primary-light);
      }
      .category-header {
        font-weight: bold;
      }

      /* FEEDBACK PANEL */
      .feedback-panel h3 { margin-top: 0; }
      .feedback-panel .feedback-entry { margin-bottom: 1rem; }
      .feedback-panel label {
        font-weight: 600;
        display: block;
        margin-bottom: 0.3rem;
      }
      .feedback-input {
        display: block;
        width: 100%;
        max-width: 600px;
        box-sizing: border-box;
        min-height: 80px;
        padding: 0.8rem;
        border: 2px solid #e2e8f0;
        border-radius: var(--radius);
        font-size: 1rem;
        transition: var(--transition);
        white-space: pre-wrap;
        word-wrap: break-word;
        overflow: auto;
      }
      .feedback-input:focus {
        outline: none;
        border-color: var(--primary-light);
        box-shadow: 0 0 0 3px rgba(126, 34, 206, 0.2);
      }
      .feedback-input:empty::before {
        content: attr(data-placeholder);
        color: #9ca3af;
      }

      /* Legend & Definitions */
      #toggleLegend {
        margin: 0.5rem 0;
        padding: 0.4rem 0.8rem;
        background: var(--gradient-light);
        color: #fff;
        border: none;
        border-radius: var(--radius);
        cursor: pointer;
        transition: var(--transition);
      }
      #toggleLegend:hover { opacity: 0.9; }
      #legend {
        display: none;
        margin-top: 0.5rem;
        font-size: 0.9rem;
        line-height: 1.4;
        background: var(--panel-light);
        border: 1px solid var(--border-light);
        border-radius: var(--radius);
        padding: 0.75rem;
      }
      #legend h4 { margin-top: 0; }

      /* Self-Assessment Checklist Section */
      .self-assessment-section {
        background: var(--panel-light);
        border: 1px solid var(--border-light);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 1rem;
        margin: 1rem auto;
        max-width: 800px;
      }
      .self-assessment-section h3 {
        text-align: center;
        margin-top: 0;
      }
      .self-assessment-section ul {
        list-style: none;
        padding-left: 0;
      }
      .self-assessment-section li {
        margin: 0.5rem 0;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      .self-assessment-section input[type="checkbox"] {
        transform: scale(1.2);
        cursor: pointer;
      }
      .assessment-result {
        text-align: center;
        font-weight: bold;
        margin-top: 1rem;
      }

      /* MODAL: How-To & Tutorial */
      .modal-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.7);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        padding: 1rem;
      }
      .modal-bg.show {
        display: flex;
        animation: fadeIn 0.3s ease-in-out;
      }
      .modal-content {
        position: relative;
        background: #fff;
        border-radius: var(--radius);
        max-width: 90%;
        max-height: 90%;
        overflow-y: auto;
        padding: 1.5rem;
      }
      .close-btn {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 50%;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        cursor: pointer;
      }
      .close-btn:hover {
        background: rgba(255, 255, 255, 1);
      }

      /* Fun Fact Section (Bottom) */
      .fun-fact-section {
        text-align: center;
        margin: 1rem auto;
        font-style: italic;
        padding: 0.5rem;
        background: var(--panel-light);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        animation: fadeIn 0.8s ease-in-out;
        max-width: 800px;
      }

      /* Disney Magic Easter Egg Icon */
      #disneyMagic {
        position: fixed;
        bottom: 10px;
        right: 10px;
        cursor: pointer;
        font-size: 2em;
        z-index: 10000;
        animation: pulse 2s infinite;
      }
      @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
      }

      /* RESPONSIVE */
      @media (max-width: 992px) {
        .analyzer-container { padding: 0 1rem 2rem; }
      }
    </style>
  </head>
  <body>
    <!-- HEADER -->
    <header class="analyzer-header glass-panel">
      <div class="header-left">
        <div class="site-title">
          <i class="fas fa-film"></i>
          Editing Review Pro+
        </div>
        <div class="total-score" title="Your video editing is rated on 10 factors, each up to 4 points, for a total of 40. 31‚Äì40: Outstanding, 21‚Äì30: Excellent, 11‚Äì20: Great, <11: Good">
          Score: <span id="total">0</span>/40 ‚Äì <span id="scoreLabel">Good</span>
        </div>
        <div class="status-indicator" id="ranking">Incomplete</div>
      </div>
      <div class="header-right">
        <div class="group">
          <button class="btn" onclick="resetScores()" aria-label="Reset Scores">üîÑ Reset</button>
          <button class="btn" onclick="exportPNG()" aria-label="Export as PNG">üñºÔ∏è Export PNG</button>
          <button class="btn" onclick="openHowTo()" aria-label="How To Use">‚ùì How To</button>
        </div>
        <!-- Dark Mode Toggle -->
        <div class="dark-mode">
          <label class="toggle-label dark-mode-label">
            <input type="checkbox" id="darkModeToggle" onchange="toggleTheme(this)">
            <div class="dark-mode-slider">
              <span class="mode-label mode-light">‚òÄÔ∏è</span>
              <span class="mode-label mode-dark">üåô</span>
              <div class="slider-thumb"></div>
            </div>
          </label>
        </div>
      </div>
    </header>

    <!-- QUOTE OF WISDOM SECTION (Top) -->
    <div class="quote-section glass-panel" id="quoteSection">
      <!-- A random inspirational quote will appear here -->
    </div>

    <!-- MAIN CONTAINER -->
    <div class="analyzer-container">
      <!-- RUBRIC TABLE -->
      <section class="rubric-table glass-panel">
        <h2>Editing Review Rubric</h2>
        <table class="modern-table">
          <thead>
            <tr>
              <th>Category</th>
              <th>Good (1)</th>
              <th>Great (2)</th>
              <th>Excellent (3)</th>
              <th>Outstanding (4)</th>
            </tr>
          </thead>
          <tbody>
            <!-- 0. Overall Impact -->
            <tr>
              <td class="category-header" data-category="0"><strong>üåü Overall Impact</strong></td>
              <td data-category="0" data-rating="1" role="button" tabindex="0">
                Meets basic requirements but lacks significant emotional or creative impact.
              </td>
              <td data-category="0" data-rating="2" role="button" tabindex="0">
                An engaging edit that supports the video‚Äôs purpose with noticeable creative effort.
              </td>
              <td data-category="0" data-rating="3" role="button" tabindex="0">
                Highly effective editing that engages the viewer and enhances the content‚Äôs impact.
              </td>
              <td data-category="0" data-rating="4" role="button" tabindex="0">
                Masterful editing that captivates the audience, evokes strong emotions, and drives action.
              </td>
            </tr>
            <!-- 1. Narrative Flow & Storytelling -->
            <tr>
              <td class="category-header" data-category="1"><strong>üé¨ Narrative Flow & Storytelling</strong></td>
              <td data-category="1" data-rating="1" role="button" tabindex="0">
                The video has a general structure but suffers from frequent logical gaps or abrupt scene changes.
              </td>
              <td data-category="1" data-rating="2" role="button" tabindex="0">
                The narrative follows a recognizable structure with occasional lapses in clarity.
              </td>
              <td data-category="1" data-rating="3" role="button" tabindex="0">
                The narrative is engaging, with clear sequencing and transitions that support the story.
              </td>
              <td data-category="1" data-rating="4" role="button" tabindex="0">
                The narrative flows seamlessly, captivating the audience with a well-structured and emotionally engaging story.
              </td>
            </tr>
            <!-- 2. Cutting & Transitions -->
            <tr>
              <td class="category-header" data-category="2"><strong>‚úÇÔ∏è Cutting & Transitions</strong></td>
              <td data-category="2" data-rating="1" role="button" tabindex="0">
                Cuts are basic and sometimes jarring, disrupting the viewing experience.
              </td>
              <td data-category="2" data-rating="2" role="button" tabindex="0">
                Cuts generally complement the narrative flow with few noticeable disruptions.
              </td>
              <td data-category="2" data-rating="3" role="button" tabindex="0">
                Transitions are smooth and effectively enhance pacing and continuity.
              </td>
              <td data-category="2" data-rating="4" role="button" tabindex="0">
                Cuts are executed with precision, employing creative transitions that elevate the edit.
              </td>
            </tr>
            <!-- 3. Pacing & Timing -->
            <tr>
              <td class="category-header" data-category="3"><strong>‚è±Ô∏è Pacing & Timing</strong></td>
              <td data-category="3" data-rating="1" role="button" tabindex="0">
                Pacing is uneven, with scenes that feel rushed or dragged out.
              </td>
              <td data-category="3" data-rating="2" role="button" tabindex="0">
                Generally consistent pacing with minor timing issues.
              </td>
              <td data-category="3" data-rating="3" role="button" tabindex="0">
                Pacing is well-managed with effective scene lengths that maintain viewer interest.
              </td>
              <td data-category="3" data-rating="4" role="button" tabindex="0">
                Exemplary pacing and timing keep the audience fully engaged.
              </td>
            </tr>
            <!-- 4. Technical Quality & Export -->
            <tr>
              <td class="category-header" data-category="4"><strong>üíª Technical Quality & Export</strong></td>
              <td data-category="4" data-rating="1" role="button" tabindex="0">
                Resolution and export are acceptable but may exhibit compression artifacts, aspect ratio issues, or frame rate inconsistencies.
              </td>
              <td data-category="4" data-rating="2" role="button" tabindex="0">
                Good resolution and export quality with only minor technical imperfections.
              </td>
              <td data-category="4" data-rating="3" role="button" tabindex="0">
                High-quality export meeting industry standards, with correct aspect ratio and no visible artifacts.
              </td>
              <td data-category="4" data-rating="4" role="button" tabindex="0">
                Exceptional technical quality with pristine resolution, flawless export, and consistent frame rate.
              </td>
            </tr>
            <!-- 5. Story/Content Engagement -->
            <tr>
              <td class="category-header" data-category="5"><strong>üìñ Story/Content Engagement</strong></td>
              <td data-category="5" data-rating="1" role="button" tabindex="0">
                Content is passable but fails to fully engage or clarify the core message.
              </td>
              <td data-category="5" data-rating="2" role="button" tabindex="0">
                The content is engaging with a clear message, though it may lack depth.
              </td>
              <td data-category="5" data-rating="3" role="button" tabindex="0">
                Content is compelling and resonates well with the target audience.
              </td>
              <td data-category="5" data-rating="4" role="button" tabindex="0">
                Exceptionally engaging content that deeply resonates and inspires the audience.
              </td>
            </tr>
            <!-- 6. Use of Music & Sound Design -->
            <tr>
              <td class="category-header" data-category="6"><strong>üéµ Use of Music & Sound Design</strong></td>
              <td data-category="6" data-rating="1" role="button" tabindex="0">
                Background music and sound effects are present but poorly balanced or distracting.
              </td>
              <td data-category="6" data-rating="2" role="button" tabindex="0">
                Music and sound design moderately enhance the video, with minor balance issues.
              </td>
              <td data-category="6" data-rating="3" role="button" tabindex="0">
                Thoughtfully integrated sound design with well-chosen music and balanced effects.
              </td>
              <td data-category="6" data-rating="4" role="button" tabindex="0">
                Exemplary use of music and sound design that elevates the emotional and narrative impact.
              </td>
            </tr>
            <!-- 7. Visual Effects & Graphics -->
            <tr>
              <td class="category-header" data-category="7"><strong>üé® Visual Effects & Graphics</strong></td>
              <td data-category="7" data-rating="1" role="button" tabindex="0">
                Graphics are minimal‚Äîbasic text, simple lower-thirds, or overlays that do little to enhance the visual experience.
              </td>
              <td data-category="7" data-rating="2" role="button" tabindex="0">
                Effective use of text, lower-thirds, and simple overlays that support the content.
              </td>
              <td data-category="7" data-rating="3" role="button" tabindex="0">
                High-quality effects and graphics enhance the storytelling without distraction.
              </td>
              <td data-category="7" data-rating="4" role="button" tabindex="0">
                Cinematic visual effects and innovative graphics elevate the production to an exceptional level.
              </td>
            </tr>
            <!-- 8. Motion Graphics / Animated Elements -->
            <tr>
              <td class="category-header" data-category="8"><strong>‚ú® Motion Graphics / Animated Elements</strong></td>
              <td data-category="8" data-rating="1" role="button" tabindex="0">
                Animated elements are minimal or rudimentary, lacking creative flair.
              </td>
              <td data-category="8" data-rating="2" role="button" tabindex="0">
                Animated elements are used effectively but may be basic in style.
              </td>
              <td data-category="8" data-rating="3" role="button" tabindex="0">
                Motion graphics are creative and enhance the visual storytelling.
              </td>
              <td data-category="8" data-rating="4" role="button" tabindex="0">
                Innovative animated elements add a dynamic, polished feel to the edit.
              </td>
            </tr>
            <!-- 9. On-Screen Text & Titles -->
            <tr>
              <td class="category-header" data-category="9"><strong>üìù On-Screen Text & Titles</strong></td>
              <td data-category="9" data-rating="1" role="button" tabindex="0">
                On-screen text is minimal or inconsistently styled, detracting from clarity.
              </td>
              <td data-category="9" data-rating="2" role="button" tabindex="0">
                Titles and captions are clear and support the video, though consistency could improve.
              </td>
              <td data-category="9" data-rating="3" role="button" tabindex="0">
                Well-designed on-screen text and titles enhance understanding without distraction.
              </td>
              <td data-category="9" data-rating="4" role="button" tabindex="0">
                Exemplary use of text and titles that are stylistically consistent, clear, and powerfully support the message.
              </td>
            </tr>
          </tbody>
        </table>
        <button id="toggleLegend" onclick="toggleLegend()">Show Legend & Definitions</button>
        <div id="legend">
          <h4>Legend & Definitions</h4>
          <p><strong>Overall Impact:</strong> Measures viewer engagement, emotional resonance, creative flair, and call-to-action strength.</p>
          <p><strong>Narrative Flow & Storytelling:</strong> Evaluates the overall structure and clarity of the story.</p>
          <p><strong>Cutting & Transitions:</strong> Assesses how seamlessly cuts and transitions support the narrative.</p>
          <p><strong>Pacing & Timing:</strong> Measures the tempo and rhythm of the edit, ensuring scenes maintain engagement.</p>
          <p><strong>Technical Quality & Export:</strong> Evaluates resolution, aspect ratio, absence of compression artifacts, and frame rate consistency.</p>
          <p><strong>Story/Content Engagement:</strong> Assesses how compelling and resonant the content is with its target audience.</p>
          <p><strong>Use of Music & Sound Design:</strong> Reviews how background music and sound effects enhance the edit.</p>
          <p><strong>Visual Effects & Graphics:</strong> Considers the use of text, lower-thirds, overlays, and overall graphic polish.</p>
          <p><strong>Motion Graphics / Animated Elements:</strong> Assesses the creativity and effectiveness of animated elements.</p>
          <p><strong>On-Screen Text & Titles:</strong> Evaluates clarity, style, and how well on-screen text supports the message.</p>
          <h5>Rating Levels</h5>
          <ul>
            <li><strong>Good (1):</strong> Meets basic requirements but with noticeable shortcomings.</li>
            <li><strong>Great (2):</strong> Solid execution with minor areas for improvement.</li>
            <li><strong>Excellent (3):</strong> Professional quality with only slight refinements needed.</li>
            <li><strong>Outstanding (4):</strong> Exceeds industry standards with exceptional execution.</li>
          </ul>
        </div>
      </section>

      <!-- FEEDBACK PANEL -->
      <section class="feedback-panel glass-panel">
        <h3>Feedback</h3>
        <div class="feedback-entry">
          <label for="humanFeedback">Human Feedback</label>
          <div id="humanFeedback" class="feedback-input" contenteditable="true" data-placeholder="Enter your human feedback here..." aria-label="Human Feedback"></div>
        </div>
        <div class="feedback-entry">
          <label for="aiFeedback">AI Feedback</label>
          <div id="aiFeedback" class="feedback-input" contenteditable="true" data-placeholder="Enter your AI feedback here..." aria-label="AI Feedback"></div>
        </div>
      </section>
    </div>

    <!-- FUN FACT SECTION (Bottom) -->
    <div class="fun-fact-section glass-panel" id="funFactSection">
      <!-- A random fun fact or tip will appear here -->
    </div>

    <!-- SELF-ASSESSMENT CHECKLIST SECTION -->
    <section class="self-assessment-section">
      <h3>Self-Assessment Checklist</h3>
      <ul>
        <li><input type="checkbox" id="check1"> <label for="check1">Did you confirm that all voiceovers match on-screen graphics?</label></li>
        <li><input type="checkbox" id="check2"> <label for="check2">Have you normalized audio so the volume is consistent?</label></li>
        <li><input type="checkbox" id="check3"> <label for="check3">Are all transitions smooth and visually appealing?</label></li>
        <li><input type="checkbox" id="check4"> <label for="check4">Did you verify that on-screen text and titles are clear and free of typos?</label></li>
        <li><input type="checkbox" id="check5"> <label for="check5">Is the overall narrative clear, engaging, and well-paced?</label></li>
        <li><input type="checkbox" id="check6"> <label for="check6">Have you double-checked technical quality (resolution, aspect ratio, frame rate)?</label></li>
        <li><input type="checkbox" id="check7"> <label for="check7">Did you incorporate creative editing elements that enhance the story?</label></li>
        <li><input type="checkbox" id="check8"> <label for="check8">Have you confirmed that the use of music and sound design elevates the video?</label></li>
      </ul>
      <button class="btn" onclick="submitAssessment()">Submit Self-Assessment</button>
      <div class="assessment-result" id="assessmentResult"></div>
    </section>

    <!-- HOW-TO MODAL -->
    <div class="modal-bg" id="howToModal" role="dialog" aria-modal="true">
      <div class="modal-content">
        <span class="close-btn" onclick="closeHowTo()" aria-label="Close How To">‚úï</span>
        <h2>How to Use Editing Review Pro+</h2>
        <ul>
          <li>Review each editing criterion by clicking on the appropriate rating cell.</li>
          <li>The total score and status update live as you select ratings.</li>
          <li>Read the daily Quote of Wisdom for inspiration and a touch of Disney magic.</li>
          <li>Provide additional feedback in the Human and AI feedback boxes.</li>
          <li>Use the Self-Assessment Checklist to evaluate your own work.</li>
          <li>When finished, you can reset scores or export the review as a PNG.</li>
        </ul>
      </div>
    </div>

    <!-- TUTORIAL MODAL -->
    <div class="modal-bg" id="tutorialModal" role="dialog" aria-modal="true">
      <div class="modal-content">
        <span class="close-btn" onclick="closeTutorial()" aria-label="Close Tutorial">‚úï</span>
        <div id="tutorialContent"></div>
      </div>
    </div>

    <!-- Hidden Audio Elements for Sound Effects -->
    <audio id="victorySound" src="victory.mp3"></audio>
    <audio id="wompSound" src="womp.mp3"></audio>

    <!-- DISNEY MAGIC EASTER EGG ICON -->
    <div id="disneyMagic" title="Click for a little Disney Magic!">‚ú®</div>

    <!-- JAVASCRIPT -->
    <script>
      /***************************************************
       * Global Variables & Milestones
       ***************************************************/
      let scores = {};
      let confettiShown = false;
      let milestoneTriggered = {}; // For 10-factor scoring (max score = 40)
      const milestoneMessages = {
        10: "Initial review complete!",
        20: "Halfway to perfection!",
        30: "Almost there‚Äîgreat editing!",
        40: "Editing Master: Outstanding work!"
      };
      const progressAudio = {
        victory: document.getElementById("victorySound"),
        womp: document.getElementById("wompSound")
      };

      // Array of inspirational quotes (editing wisdom, directors, Disney, etc.)
      const editorQuotes = [
        "‚ÄúIn film editing, it's not about what you add, it's about what you leave out.‚Äù ‚Äì Walter Murch",
        "‚ÄúCutting is rewriting.‚Äù ‚Äì Thelma Schoonmaker",
        "‚ÄúEditing is where the magic happens.‚Äù ‚Äì Unknown",
        "‚ÄúGood editing is invisible; great editing is felt.‚Äù ‚Äì Unknown",
        "‚ÄúIn editing, less is often more.‚Äù ‚Äì Unknown",
        "‚ÄúAll our dreams can come true if we have the courage to pursue them.‚Äù ‚Äì Walt Disney",
        "‚ÄúIt's kind of fun to do the impossible.‚Äù ‚Äì Walt Disney",
        "‚ÄúThe past can hurt. But the way I see it, you can either run from it, or learn from it.‚Äù ‚Äì Rafiki, The Lion King",
        "‚ÄúCinema is truth at 24 frames per second.‚Äù ‚Äì Jean-Luc Godard",
        "‚ÄúThe secret to film editing is knowing when to cut.‚Äù ‚Äì Unknown",
        "‚ÄúEvery cut tells a story.‚Äù ‚Äì Unknown",
        "‚ÄúEditing is the craft of transforming raw footage into art.‚Äù ‚Äì Unknown",
        "‚ÄúA good cut is a silent hero.‚Äù ‚Äì Unknown",
        "‚ÄúWhen you're editing, you're not just cutting footage; you're sculpting a story.‚Äù ‚Äì Unknown",
        "‚ÄúThe technique of film editing is to be invisible.‚Äù ‚Äì Walter Murch",
        "‚ÄúThe art of editing is the art of omission.‚Äù ‚Äì Elia Kazan",
        "‚ÄúI‚Äôm convinced that nothing happens in the editing room.‚Äù ‚Äì Francis Ford Coppola",
        "‚ÄúMay your edits be as magical as pixie dust.‚Äù ‚Äì Inspired by Disney"
      ];

      // Array of fun facts and tips
      const funFacts = [
        "Did you know? 'Apocalypse Now' went through over 80 different edits before the final cut!",
        "Fun Tip: Trust your gut‚Äîif a cut feels off, try a different approach.",
        "Great editing can transform mundane footage into cinematic art.",
        "Sometimes, a well-timed pause speaks louder than action-packed sequences.",
        "Experiment with transitions‚Äîcreative cuts can set your edit apart!"
      ];

      /***************************************************
       * DOMContentLoaded Setup
       ***************************************************/
      document.addEventListener("DOMContentLoaded", () => {
        // Set a random inspirational quote, ensuring it's different from the last one
        const lastQuote = localStorage.getItem("lastQuoteIndex");
        let newQuoteIndex;
        do {
          newQuoteIndex = Math.floor(Math.random() * editorQuotes.length);
        } while (editorQuotes.length > 1 && newQuoteIndex == lastQuote);
        localStorage.setItem("lastQuoteIndex", newQuoteIndex);
        document.getElementById("quoteSection").innerText = editorQuotes[newQuoteIndex];

        // Set a random fun fact
        document.getElementById("funFactSection").innerText = funFacts[Math.floor(Math.random() * funFacts.length)];

        // Event delegation for rubric table cells:
        document.querySelector('.modern-table').addEventListener('click', (e) => {
          const cell = e.target.closest('td[data-rating]');
          if (cell) selectRating(cell);
        });

        // Add click event for the Disney Magic icon
        document.getElementById("disneyMagic").addEventListener("click", triggerDisneyMagic);
      });

      /***************************************************
       * Rubric Functions
       ***************************************************/
      function selectRating(cell) {
        const categoryIndex = Number(cell.getAttribute('data-category'));
        const rating = parseInt(cell.getAttribute('data-rating'));
        const row = cell.parentElement;
        // Remove selection from all rating cells in the row
        row.querySelectorAll('td').forEach(td => {
          if (td !== row.firstElementChild) td.classList.remove('selected');
        });
        cell.classList.add('selected');
        scores[categoryIndex] = rating;
        updateTotal();
      }

      function updateTotal() {
        let total = Object.values(scores).reduce((a, b) => a + b, 0);
        document.getElementById('total').textContent = total;
        const scoreLabel = document.getElementById('scoreLabel');
        // Check if all 10 factors have been rated
        if (Object.keys(scores).length < 10) {
          document.getElementById('ranking').textContent = 'Incomplete';
          document.getElementById('ranking').style.color = '#64748b';
        } else if (total < 11) {
          scoreLabel.textContent = "Good";
          document.getElementById('ranking').textContent = 'Needs Work üî¥';
          document.getElementById('ranking').style.color = '#ef4444';
          progressAudio.womp.play && progressAudio.womp.play();
        } else if (total < 21) {
          scoreLabel.textContent = "Great";
          document.getElementById('ranking').textContent = 'Great! üü¢';
          document.getElementById('ranking').style.color = '#22c55e';
        } else if (total < 31) {
          scoreLabel.textContent = "Excellent";
          document.getElementById('ranking').textContent = 'Excellent üü°';
          document.getElementById('ranking').style.color = '#eab308';
        } else {
          scoreLabel.textContent = "Outstanding";
          document.getElementById('ranking').textContent = 'Outstanding üîµ';
          document.getElementById('ranking').style.color = '#3b82f6';
          progressAudio.victory.play && progressAudio.victory.play();
          if (!confettiShown) {
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            confettiShown = true;
          }
        }
        updateProgressBar(total);
      }

      function updateProgressBar(total) {
        const percentage = (total / 40) * 100;
        // (Optional: update a visual progress bar if added to the UI)
        const milestoneDiv = document.getElementById("milestoneMessage");
        if (milestoneMessages[total] && !milestoneTriggered[total]) {
          if (milestoneDiv) {
            milestoneDiv.textContent = milestoneMessages[total];
            milestoneTriggered[total] = true;
            setTimeout(() => { milestoneDiv.textContent = ""; }, 3000);
          }
        }
      }

      /***************************************************
       * Reset Function
       ***************************************************/
      function resetScores() {
        scores = {};
        document.querySelectorAll('.modern-table td[data-rating]').forEach(cell => cell.classList.remove('selected'));
        document.getElementById('total').textContent = '0';
        document.getElementById('scoreLabel').textContent = 'Good';
        document.getElementById('ranking').textContent = 'Incomplete';
        milestoneTriggered = {};
        confettiShown = false;
      }

      /***************************************************
       * Export Function (PNG)
       ***************************************************/
      async function exportPNG() {
        const header = document.querySelector("header.analyzer-header");
        const originalPosition = header.style.position;
        header.style.position = "static";
        const canvas = await html2canvas(document.body, { scale: 2, useCORS: true });
        const dataUrl = canvas.toDataURL('image/png');
        const link = document.createElement('a');
        link.download = 'editing-review.png';
        link.href = dataUrl;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        header.style.position = originalPosition;
      }

      /***************************************************
       * Theme & Modal Functions
       ***************************************************/
      function toggleTheme(input) {
        const html = document.documentElement;
        if (input.checked) {
          html.setAttribute("data-theme", "dark");
        } else {
          html.removeAttribute("data-theme");
        }
      }
      function openHowTo() {
        document.getElementById('howToModal').classList.add('show');
      }
      function closeHowTo() {
        document.getElementById('howToModal').classList.remove('show');
      }
      function openTutorial(topic) {
        const tutorialContent = document.getElementById('tutorialContent');
        let content = "";
        if (topic === 'narrative') {
          content = "<h2>Enhancing Narrative Flow</h2><p>Focus on the pacing and sequence of shots. Experiment with different cuts to build a compelling story.</p>";
        } else if (topic === 'transitions') {
          content = "<h2>Smooth Transitions</h2><p>Use creative but purposeful transitions. Avoid jarring cuts unless intentionally stylistic.</p>";
        } else if (topic === 'technical') {
          content = "<h2>Technical Quality</h2><p>Export in high resolution with proper compression to preserve quality across devices.</p>";
        } else if (topic === 'overall') {
          content = "<h2>Overall Impact</h2><p>Strive for a final edit that not only informs but also emotionally engages your audience.</p>";
        } else {
          content = "<h2>Tutorial</h2><p>No tutorial available for this topic.</p>";
        }
        tutorialContent.innerHTML = content;
        document.getElementById('tutorialModal').classList.add('show');
      }
      function closeTutorial() {
        document.getElementById('tutorialModal').classList.remove('show');
      }
      function toggleLegend() {
        const legend = document.getElementById("legend");
        const btn = document.getElementById("toggleLegend");
        if (legend.style.display === "none" || legend.style.display === "") {
          legend.style.display = "block";
          btn.textContent = "Hide Legend & Definitions";
        } else {
          legend.style.display = "none";
          btn.textContent = "Show Legend & Definitions";
        }
      }

      /***************************************************
       * Self-Assessment Checklist Functions
       ***************************************************/
      function submitAssessment() {
        const checklist = document.querySelectorAll('.self-assessment-section input[type="checkbox"]');
        let checkedCount = 0;
        checklist.forEach(box => {
          if (box.checked) checkedCount++;
        });
        const totalItems = checklist.length;
        let resultText = `You checked ${checkedCount} out of ${totalItems} items. `;
        if (checkedCount === totalItems) {
          resultText += "üéâ Master Editor Badge: You are a true editing wizard!";
          confetti({ particleCount: 200, spread: 100, origin: { y: 0.5 } });
        } else if (checkedCount >= totalItems * 0.75) {
          resultText += "Great job! You're almost there.";
        } else {
          resultText += "Keep refining your work for that perfect edit.";
        }
        document.getElementById("assessmentResult").innerText = resultText;
      }

      /***************************************************
       * Disney Magic Easter Egg Function
       ***************************************************/
      function triggerDisneyMagic() {
        // Trigger a confetti burst and display a random Disney quote alert
        confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
        const disneyQuotes = [
          "‚ÄúAll our dreams can come true if we have the courage to pursue them.‚Äù ‚Äì Walt Disney",
          "‚ÄúIt's kind of fun to do the impossible.‚Äù ‚Äì Walt Disney",
          "‚ÄúThe way to get started is to quit talking and begin doing.‚Äù ‚Äì Walt Disney",
          "‚ÄúIf you can dream it, you can do it.‚Äù ‚Äì Walt Disney",
          "‚ÄúThe more you like yourself, the less you are like anyone else, which makes you unique.‚Äù ‚Äì Walt Disney"
        ];
        const randomIndex = Math.floor(Math.random() * disneyQuotes.length);
        alert(disneyQuotes[randomIndex]);
      }

      /***************************************************
       * Easter Egg Surprise (Alt+E)
       ***************************************************/
      document.addEventListener("keydown", function(e) {
        if (e.altKey && e.key.toLowerCase() === "e") {
          triggerDisneyMagic();
        }
      });
    </script>
  </body>
</html>
