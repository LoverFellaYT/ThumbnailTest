<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Editing Review Pro+ (Unified Rubric: Idea &amp; Title)</title>

    <!-- Font Awesome for editing icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      integrity="sha512-Fo3rlrZj/k7ujTnH/PRRZ9i6Lkxy/lK+Ad+Qw3PweIIsXgTn5N2sA3ZgP6L6YKn42pPZLNSQNkI3b7HlFj5pAg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Roboto Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
      rel="stylesheet"
    />

    <!-- html2canvas for PNG Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- Canvas Confetti for Outstanding Score Effect -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>

    <style>
      /* CSS Variables & Base Styles */
      :root {
        --primary-light: #4facfe;
        --accent-light: #00f2fe;
        --bg-light: #f9fafb;
        --text-light: #1e293b;
        --panel-light: rgba(255, 255, 255, 0.96);
        --border-light: rgba(255, 255, 255, 0.2);
        --shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
        --transition: all 0.2s ease;
        --radius: 14px;
        --gradient-light: linear-gradient(135deg, var(--primary-light) 0%, var(--accent-light) 100%);
        --spacing: 1rem;
        --font-base: 'Roboto', sans-serif;
        --table-cell-bg-light: rgba(255, 255, 255, 0.85);
      }

      /* Dark Mode Variables */
      html[data-theme="dark"] {
        --bg-light: #1f1f1f;
        --text-light: #f3f3f3;
        --panel-light: rgba(18, 18, 18, 0.98);
        --border-light: rgba(255, 255, 255, 0.2);
        --gradient-light: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        --table-cell-bg-light: rgba(30, 30, 30, 0.85);
      }

      /* Base styles */
      body {
        margin: 0;
        padding: 0;
        font-family: var(--font-base);
        background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px), var(--bg-light);
        background-size: 30px 30px;
        color: var(--text-light);
        transition: var(--transition);
      }

      button:focus,
      [tabindex]:focus {
        outline: 2px solid var(--accent-light);
      }

      /* Panels */
      .glass-panel {
        background: var(--panel-light);
        border: 1px solid var(--border-light);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        backdrop-filter: blur(12px);
        padding: var(--spacing);
        margin-bottom: var(--spacing);
      }

      /* HEADER */
      header.analyzer-header {
        position: sticky;
        top: 0;
        z-index: 2000;
        padding: 1.5rem 2rem;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .header-left {
        display: flex;
        flex-direction: column;
        gap: 0.4rem;
      }

      .site-title {
        font-size: 1.8rem;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      .site-title i {
        color: var(--accent-light);
      }

      .total-score {
        font-size: 1.2rem;
        font-weight: 600;
        background: var(--gradient-light);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        position: relative;
        cursor: default;
        transition: var(--transition);
      }
      .total-score:hover::after {
        content: "Overall (0/84)";
        position: absolute;
        background: rgba(0, 0, 0, 0.8);
        color: #fff;
        padding: 0.5rem;
        border-radius: 4px;
        top: 110%;
        left: 0;
        white-space: pre-line;
        font-size: 0.85rem;
        z-index: 1000;
      }
      .status-indicator {
        font-weight: 600;
      }
      .header-right {
        display: flex;
        align-items: center;
        gap: 1rem;
        flex-wrap: wrap;
      }
      .header-right .group {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .btn {
        background: var(--gradient-light);
        color: #fff;
        border: none;
        padding: 0.6rem 1.2rem;
        border-radius: var(--radius);
        cursor: pointer;
        font-weight: 600;
        transition: var(--transition);
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        box-shadow: 0 4px 6px rgba(126, 34, 206, 0.2);
      }
      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(126, 34, 206, 0.4);
      }

      /* Dark Mode Slider */
      .dark-mode { }
      .toggle-label.dark-mode-label {
        cursor: pointer;
        display: inline-flex;
        align-items: center;
      }
      .dark-mode-slider {
        position: relative;
        width: 60px;
        height: 30px;
        background-color: #e0e0e0;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 5px;
        transition: background-color 0.3s;
      }
      .dark-mode-slider .mode-label {
        font-size: 16px;
      }
      .dark-mode-slider .slider-thumb {
        position: absolute;
        width: 26px;
        height: 26px;
        background: white;
        border-radius: 50%;
        top: 2px;
        left: 2px;
        transition: transform 0.3s;
      }
      input#darkModeToggle { display: none; }
      input#darkModeToggle:checked + .dark-mode-slider .slider-thumb {
        transform: translateX(30px);
      }
      input#darkModeToggle:checked + .dark-mode-slider {
        background-color: var(--primary-light);
      }

      /* Quote Section (Top) */
      .quote-section {
        text-align: center;
        margin: 1rem auto;
        font-style: italic;
        padding: 0.5rem;
        background: var(--panel-light);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        animation: fadeIn 0.8s ease-in-out;
        max-width: 800px;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
      }

      /* Main Content */
      main {
        margin: var(--spacing) auto;
      }
      .analyzer-container {
        width: 95%;
        max-width: 1400px;
        margin: 2rem auto;
        padding: 0 var(--spacing) 2rem;
      }

      /* Rubric Table Styles */
      .rubric-table {
        margin-bottom: var(--spacing);
        overflow-x: auto;
      }
      .modern-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        font-family: var(--font-base);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        border-radius: var(--radius);
        overflow: hidden;
        transition: var(--transition);
      }
      .modern-table thead th {
        padding: 0.75rem 1.5rem;
        font-weight: 600;
        text-align: left;
      }
      .modern-table tbody td {
        padding: 0.75rem 1.5rem;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        transition: var(--transition);
        vertical-align: top;
        background: var(--table-cell-bg-light);
      }
      .modern-table tbody td:hover {
        transform: scale(1.01);
        background-color: rgba(224, 231, 255, 0.3);
      }
      .modern-table tbody tr:hover td {
        background-color: rgba(0, 0, 0, 0.03);
      }

      /* Section headers */
      .section-header {
        background: var(--gradient-light);
        color: #fff;
        text-align: center;
        font-size: 1.1rem;
        cursor: default;
      }

      /* Fun Fact Section (Bottom) */
      .fun-fact-section {
        text-align: center;
        margin: 1rem auto;
        font-style: italic;
        padding: 0.5rem;
        background: var(--panel-light);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        animation: fadeIn 0.8s ease-in-out;
        max-width: 800px;
      }

      /* Disney Magic Easter Egg Icon */
      #disneyMagic {
        position: fixed;
        bottom: 10px;
        right: 10px;
        cursor: pointer;
        font-size: 2em;
        z-index: 10000;
        animation: pulse 2s infinite;
      }
      @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
      }

      /* Modal Styles ‚Äì Using semantic <dialog> for accessibility */
      .modal-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.7);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        padding: var(--spacing);
      }
      .modal-bg.show {
        display: flex;
        animation: fadeIn 0.3s ease-in-out;
      }
      .modal-content {
        position: relative;
        background: #fff;
        border-radius: var(--radius);
        max-width: 90%;
        max-height: 90%;
        overflow-y: auto;
        padding: 1.5rem;
      }
      .close-btn {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 50%;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        cursor: pointer;
      }
      .close-btn:hover {
        background: rgba(255, 255, 255, 1);
      }
    </style>
  </head>
  <body>
    <!-- HEADER -->
    <header class="analyzer-header glass-panel">
      <div class="header-left">
        <div class="site-title">
          <i class="fas fa-film" aria-hidden="true"></i>
          <span>Editing Review Pro+</span>
        </div>
        <div class="total-score" id="scoreDisplay" tabindex="0">
          Overall (<span id="scoreTotal">0</span>/84) ‚Äì <span id="scoreLabel">Needs Work</span>
        </div>
        <div class="status-indicator" id="ranking" aria-live="polite">Incomplete</div>
      </div>
      <div class="header-right">
        <div class="group">
          <button class="btn" onclick="resetScores()" aria-label="Reset Scores">üîÑ Reset</button>
          <button class="btn" onclick="exportPNG()" aria-label="Export as PNG">üñºÔ∏è Export PNG</button>
          <button class="btn" onclick="openHowTo()" aria-label="How To Use">‚ùì How To</button>
          <!-- Renamed 'Rubrics' to 'Home' -->
          <button class="btn" onclick="window.open('https://loverfellayt.github.io/ThumbnailTest/my-video-rubrics#rubrics','_blank');" aria-label="Home">
            <i class="fas fa-home"></i> Home
          </button>
        </div>
        <!-- Dark Mode Toggle -->
        <div class="dark-mode">
          <label class="toggle-label dark-mode-label" for="darkModeToggle">
            <input type="checkbox" id="darkModeToggle" onchange="toggleTheme(this)" aria-label="Toggle Dark Mode" />
            <div class="dark-mode-slider">
              <span class="mode-label mode-light">‚òÄÔ∏è</span>
              <span class="mode-label mode-dark">üåô</span>
              <div class="slider-thumb"></div>
            </div>
          </label>
        </div>
      </div>
    </header>

    <!-- QUOTE OF WISDOM SECTION (Top) -->
    <div class="quote-section glass-panel" id="quoteSection" role="note" aria-live="polite">
      <!-- A random inspirational quote will appear here -->
    </div>

    <main>
      <div class="analyzer-container">
        <!-- IDEA REVIEW RUBRIC -->
        <section class="rubric-table glass-panel" aria-labelledby="ideaRubricHeading">
          <h2 id="ideaRubricHeading">Idea Review Rubric</h2>
          <table class="modern-table" id="ideaRubricTable">
            <thead>
              <tr>
                <th>Category</th>
                <th>Good (1)</th>
                <th>Great (2)</th>
                <th>Excellent (3)</th>
                <th>Outstanding (4)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Originality &amp; Creativity</strong></td>
                <td>Idea is clich√©d or unoriginal</td>
                <td>Some original elements, but overall common</td>
                <td>Original and shows creative thought</td>
                <td>Highly innovative and groundbreaking</td>
              </tr>
              <tr>
                <td><strong>Concept Clarity &amp; Focus</strong></td>
                <td>Vague or confusing concept</td>
                <td>Concept is clear but lacks focus</td>
                <td>Clearly defined and well-focused idea</td>
                <td>Exceptionally clear, focused, and compelling</td>
              </tr>
              <tr>
                <td><strong>Audience Relevance</strong></td>
                <td>Does not align with target audience</td>
                <td>Somewhat relevant to the target audience</td>
                <td>Strong alignment with audience interests</td>
                <td>Perfectly tailored to captivate the target audience</td>
              </tr>
              <tr>
                <td><strong>Potential Impact</strong></td>
                <td>Limited impact or appeal</td>
                <td>Moderate potential impact</td>
                <td>High potential to engage and inspire</td>
                <td>Exceptional impact that can drive major success</td>
              </tr>
            </tbody>
          </table>
        </section>

        <!-- TITLE REVIEW RUBRIC -->
        <section class="rubric-table glass-panel" aria-labelledby="titleRubricHeading">
          <h2 id="titleRubricHeading">Title Review Rubric</h2>
          <table class="modern-table" id="titleRubricTable">
            <thead>
              <tr>
                <th>Category</th>
                <th>Good (1)</th>
                <th>Great (2)</th>
                <th>Excellent (3)</th>
                <th>Outstanding (4)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Relevance &amp; Honesty</strong></td>
                <td>Loosely related or may mislead</td>
                <td>Relates to content but slight exaggeration</td>
                <td>Clearly reflects content and unique hook</td>
                <td>Perfectly aligned with content, authentic promise</td>
              </tr>
              <tr>
                <td><strong>Clarity &amp; Keyword Inclusion</strong></td>
                <td>Vague, omits key terms</td>
                <td>Includes some keywords but lacks clarity</td>
                <td>Clear, concise with essential keywords</td>
                <td>Crystal clear, perfectly concise with all keywords</td>
              </tr>
              <tr>
                <td><strong>Curiosity &amp; Intrigue</strong></td>
                <td>No mystery or unanswered questions</td>
                <td>Some intrigue, but not compelling</td>
                <td>Creates a curiosity gap effectively</td>
                <td>Masterfully leverages curiosity gap, irresistible teaser</td>
              </tr>
              <tr>
                <td><strong>Emotional Impact</strong></td>
                <td>Emotionally flat</td>
                <td>Mild emotional reaction</td>
                <td>Generates clear emotional response</td>
                <td>Elicits a powerful, immediate emotional reaction</td>
              </tr>
              <tr>
                <td><strong>Novelty &amp; Creativity</strong></td>
                <td>Generic, does not stand out</td>
                <td>Some originality, still common</td>
                <td>Creative, fresh perspective</td>
                <td>Highly innovative, unique angle that stands out</td>
              </tr>
              <tr>
                <td><strong>Brevity &amp; Readability</strong></td>
                <td>Overly long or cluttered</td>
                <td>Moderately concise, some extraneous words</td>
                <td>Concise, easy to read</td>
                <td>Perfectly concise, powerful message in few words</td>
              </tr>
            </tbody>
          </table>
        </section>
      </div>

      <!-- FUN FACT SECTION (Bottom) -->
      <div class="fun-fact-section glass-panel" id="funFactSection" role="note" aria-live="polite">
        <!-- A random fun fact or tip will appear here -->
      </div>
    </main>

    <!-- HOW-TO MODAL -->
    <dialog class="modal-bg" id="howToModal" aria-labelledby="howToHeading" aria-modal="true">
      <div class="modal-content">
        <button class="close-btn" onclick="closeHowTo()" aria-label="Close How To">&times;</button>
        <h2 id="howToHeading">How to Use Editing Review Pro+</h2>
        <ul>
          <li>Click on the appropriate rating cell for each row in the rubric tables.</li>
          <li>Your total score updates automatically (out of 84 maximum points).</li>
          <li>If any item is rated 1, the overall result is "Rejected."</li>
          <li>Read the daily Quote of Wisdom for inspiration.</li>
          <li>Provide additional feedback if needed.</li>
          <li>When finished, you can reset scores or export the review as a PNG.</li>
        </ul>
      </div>
    </dialog>

    <!-- TUTORIAL MODAL -->
    <dialog class="modal-bg" id="tutorialModal" aria-labelledby="tutorialHeading" aria-modal="true">
      <div class="modal-content">
        <button class="close-btn" onclick="closeTutorial()" aria-label="Close Tutorial">&times;</button>
        <div id="tutorialContent"></div>
      </div>
    </dialog>

    <!-- Hidden Audio Elements for Sound Effects -->
    <audio id="victorySound" src="victory.mp3"></audio>
    <audio id="wompSound" src="womp.mp3"></audio>

    <!-- DISNEY MAGIC EASTER EGG ICON -->
    <div id="disneyMagic" title="Click for a little Disney Magic!">‚ú®</div>

    <!-- JAVASCRIPT -->
    <script>
      /***************************************************
       * Global Variables & Emoji Mapping
       ***************************************************/
      let scoreData = {};
      let confettiShown = false;
      const maxCategories = 22;
      const maxPoints = 84;

      const categoryEmojis = {
        0: '‚ö°',
        1: 'üîç',
        2: 'ü™Ñ',
        3: 'üöÄ',
        4: '‚úÇÔ∏è',
        5: '‚è≠Ô∏è',
        6: 'üéûÔ∏è',
        7: 'üß©',
        8: 'üé∂',
        9: 'üìù',
        10: 'üì∑',
        11: 'üé•',
        12: 'üí¨',
        13: 'üéµ',
        14: 'üîä',
        15: 'üéôÔ∏è',
        16: 'üì¢',
        17: '‚ùì',
        18: 'ü§Ø',
        19: 'üåÄ',
        20: 'üí´',
        21: 'üíé'
      };

      // Returns the overall rating label and color for overall score
      function getRatingLabel(overallTotal) {
        if (overallTotal < 25) {
          return { scoreLabel: "Needs Work", rankingText: "Needs Work üî¥", color: "#ef4444" };
        } else if (overallTotal < 50) {
          return { scoreLabel: "Good", rankingText: "Good üü¢", color: "#22c55e" };
        } else if (overallTotal < 70) {
          return { scoreLabel: "Great", rankingText: "Great üü°", color: "#eab308" };
        } else if (overallTotal < 80) {
          return { scoreLabel: "Excellent", rankingText: "Excellent üü£", color: "#8b5cf6" };
        } else {
          return { scoreLabel: "Outstanding", rankingText: "Outstanding üîµ", color: "#3b82f6" };
        }
      }

      // Determine section rating based on average rating of the section
      function getSectionRating(average) {
        if (average < 2) {
          return { label: "Good", color: "#f87171" };
        } else if (average < 3) {
          return { label: "Great", color: "#fb923c" };
        } else if (average < 4) {
          return { label: "Excellent", color: "#facc15" };
        } else {
          return { label: "Outstanding", color: "#4ade80" };
        }
      }

      // Helper: convert hex color to rgba with given alpha
      function hexToRGBA(hex, alpha) {
        let r = parseInt(hex.slice(1, 3), 16);
        let g = parseInt(hex.slice(3, 5), 16);
        let b = parseInt(hex.slice(5, 7), 16);
        return 'rgba(' + r + ', ' + g + ', ' + b + ', ' + alpha + ')';
      }

      /***************************************************
       * Initialization on DOMContentLoaded
       ***************************************************/
      document.addEventListener('DOMContentLoaded', function() {
        // Initialize scoreData for categories 0 to 21
        for (let i = 0; i < maxCategories; i++) {
          scoreData[i] = 0;
        }
        
        // Add click listeners to all rating cells
        const ratingCells = document.querySelectorAll('td[data-rating]');
        ratingCells.forEach(cell => {
          cell.addEventListener('click', handleCellClick);
        });
        
        // Insert emojis into category header cells
        initEmojis();
        
        // Store original header text for each section header for later updates
        initSectionHeaders();
        
        // Call updateScore once so that overall and section scores display immediately (even with 0s)
        updateScore();
        
        // Set a random inspirational quote and fun fact
        randomQuote();
        randomFunFact();
        
        // Add a click listener to the Disney Magic icon
        document.getElementById('disneyMagic').addEventListener('click', onClickDisneyMagic);
      });

      /***************************************************
       * Event Handlers & UI Functions
       ***************************************************/

      // When a rating cell is clicked:
      function handleCellClick(event) {
        const cell = event.currentTarget;
        const category = cell.getAttribute('data-category');
        const rating = parseInt(cell.getAttribute('data-rating'));

        // Remove 'selected' from other cells in this row
        const row = cell.parentElement;
        const cells = row.querySelectorAll('td[data-rating]');
        cells.forEach(c => c.classList.remove('selected'));

        // Mark this cell as selected and update the scoreData for its category
        cell.classList.add('selected');
        scoreData[category] = rating;

        updateScore();
      }

      // Recalculate and update the overall score and rating display, and update section scores
      function updateScore() {
        let overallTotal = 0;
        for (let key in scoreData) {
          overallTotal += parseInt(scoreData[key]) || 0;
        }
        document.getElementById('scoreTotal').innerText = overallTotal;

        const ratingInfo = getRatingLabel(overallTotal);
        document.getElementById('scoreLabel').innerText = ratingInfo.scoreLabel;
        const rankingElem = document.getElementById('ranking');
        rankingElem.innerText = ratingInfo.rankingText;
        rankingElem.style.color = ratingInfo.color;

        // Update section scores and header backgrounds
        updateSectionScores();

        // Launch confetti and play sound if overall score >= 80
        if (overallTotal >= 80 && !confettiShown) {
          launchConfetti();
          const victorySound = document.getElementById('victorySound');
          if (victorySound) {
            victorySound.play().catch(() => {});
          }
          confettiShown = true;
        } else if (overallTotal < 80) {
          confettiShown = false;
        }
      }

      // Clear all selections and reset the score
      function resetScores() {
        for (let i = 0; i < maxCategories; i++) {
          scoreData[i] = 0;
        }
        const ratingCells = document.querySelectorAll('td[data-rating]');
        ratingCells.forEach(cell => cell.classList.remove('selected'));
        updateScore();

        const wompSound = document.getElementById('wompSound');
        if (wompSound) {
          wompSound.play().catch(() => {});
        }
      }

      // Export the review section as a PNG image using html2canvas
      function exportPNG() {
        const container = document.querySelector('.analyzer-container');
        if (!container) return;
        html2canvas(container).then(canvas => {
          const link = document.createElement('a');
          link.download = 'review.png';
          link.href = canvas.toDataURL();
          link.click();
        }).catch(err => {
          console.error('Error exporting PNG:', err);
        });
      }

      // Toggle the display of the Legend & Definitions section (if needed)
      function toggleLegend() {
        const legend = document.getElementById('legend');
        const toggleBtn = document.getElementById('toggleLegend');
        if (legend.style.display === 'block') {
          legend.style.display = 'none';
          toggleBtn.innerText = 'Show Legend & Definitions';
        } else {
          legend.style.display = 'block';
          toggleBtn.innerText = 'Hide Legend & Definitions';
        }
      }

      // Toggle between dark mode and light mode
      function toggleTheme(checkbox) {
        if (checkbox.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
        } else {
          document.documentElement.removeAttribute('data-theme');
        }
      }

      // Open the How-To modal dialog
      function openHowTo() {
        const modal = document.getElementById('howToModal');
        if (modal.showModal) {
          modal.showModal();
        } else {
          modal.style.display = 'flex';
        }
      }

      // Close the How-To modal dialog
      function closeHowTo() {
        const modal = document.getElementById('howToModal');
        if (modal.close) {
          modal.close();
        } else {
          modal.style.display = 'none';
        }
      }

      // Close the Tutorial modal dialog
      function closeTutorial() {
        const modal = document.getElementById('tutorialModal');
        if (modal.close) {
          modal.close();
        } else {
          modal.style.display = 'none';
        }
      }

      // Prepend the emoji for each category header based on its data-category attribute
      function initEmojis() {
        const categoryHeaders = document.querySelectorAll('td.category-header');
        categoryHeaders.forEach(cell => {
          const category = cell.getAttribute('data-category');
          const emoji = categoryEmojis[category] || '';
          if (!cell.innerHTML.includes(emoji)) {
            cell.innerHTML = emoji + ' ' + cell.innerHTML;
          }
        });
      }

      // Store the original header text for each section header for later updates
      function initSectionHeaders() {
        const sectionHeaders = document.querySelectorAll('tr.section-header');
        sectionHeaders.forEach(row => {
          const cell = row.querySelector('td');
          cell.dataset.original = cell.innerText.trim();
        });
      }

      // Update each section header to include the section score and update background color.
      function updateSectionScores() {
        const sectionHeaders = document.querySelectorAll('tr.section-header');
        sectionHeaders.forEach(headerRow => {
          const group = headerRow.getAttribute('data-group');
          const groupRows = document.querySelectorAll('tr[data-group="' + group + '"]:not(.section-header)');
          let sectionScore = 0;
          groupRows.forEach(row => {
            const catCell = row.querySelector('td.category-header');
            if (catCell) {
              const cat = catCell.getAttribute('data-category');
              sectionScore += parseInt(scoreData[cat]) || 0;
            }
          });
          const numberOfRows = groupRows.length;
          const maxForSection = numberOfRows * 4;
          let sectionLabel;
          if (sectionScore === 0) {
            sectionLabel = "Incomplete";
            headerRow.style.backgroundColor = "white";
          } else {
            const average = sectionScore / numberOfRows;
            const sectionRating = getSectionRating(average);
            sectionLabel = sectionRating.label;
            headerRow.style.backgroundColor = hexToRGBA(sectionRating.color, 0.3);
          }
          const headerCell = headerRow.querySelector('td');
          headerCell.innerHTML =
            '<strong>' + headerCell.dataset.original + '</strong> ' +
            '<span style="font-weight:normal;">(Score: ' + sectionScore + '/' + maxForSection + ' - ' + sectionLabel + ')</span>';
        });
      }

      // Display a random inspirational quote in the Quote section
      function randomQuote() {
        const quoteSection = document.getElementById('quoteSection');
        const randomIndex = Math.floor(Math.random() * editorQuotes.length);
        quoteSection.innerText = editorQuotes[randomIndex];
      }

      // Display a random fun fact in the Fun Fact section
      function randomFunFact() {
        const funFacts = [
          "Did you know? The first film edit was done by physically cutting and splicing film.",
          "Fun Fact: Walter Murch, a legendary editor, also worked as a sound mixer!",
          "Tip: Sometimes less is more‚Äîtrim your edits for a tighter story.",
          "Did you know? The famous 'montage' technique was popularized in Soviet cinema.",
          "Editing can change the story. A single cut can evoke deep emotions."
        ];
        const funFactSection = document.getElementById('funFactSection');
        const randomIndex = Math.floor(Math.random() * funFacts.length);
        funFactSection.innerText = funFacts[randomIndex];
      }

      // When the Disney Magic icon is clicked, launch confetti and show an alert
      function onClickDisneyMagic() {
        launchConfetti();
        alert("Disney Magic activated! ‚ú®");
      }

      // Launch confetti using the canvas-confetti library
      function launchConfetti() {
        if (typeof confetti === "function") {
          confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 }
          });
        }
      }

      // Editor quotes array
      const editorQuotes = [
        "‚ÄúIn film editing, it's not about what you add, it's about what you leave out.‚Äù ‚Äì Walter Murch",
        "‚ÄúCutting is rewriting.‚Äù ‚Äì Thelma Schoonmaker",
        "‚ÄúEditing is where the magic happens.‚Äù ‚Äì Unknown",
        "‚ÄúGood editing is invisible; great editing is felt.‚Äù ‚Äì Unknown",
        "‚ÄúIn editing, less is often more.‚Äù ‚Äì Unknown",
        "‚ÄúAll our dreams can come true if we have the courage to pursue them.‚Äù ‚Äì Walt Disney",
        "‚ÄúIt's kind of fun to do the impossible.‚Äù ‚Äì Walt Disney",
        "‚ÄúThe past can hurt. But the way I see it, you can either run from it, or learn from it.‚Äù ‚Äì Rafiki, The Lion King",
        "‚ÄúCinema is truth at 24 frames per second.‚Äù ‚Äì Jean-Luc Godard",
        "‚ÄúThe secret to film editing is knowing when to cut.‚Äù ‚Äì Unknown",
        "‚ÄúEvery cut tells a story.‚Äù ‚Äì Unknown",
        "‚ÄúEditing is the craft of transforming raw footage into art.‚Äù ‚Äì Unknown",
        "‚ÄúA good cut is a silent hero.‚Äù ‚Äì Unknown",
        "‚ÄúWhen you're editing, you're not just cutting footage; you're sculpting a story.‚Äù ‚Äì Unknown",
        "‚ÄúThe technique of film editing is to be invisible.‚Äù ‚Äì Walter Murch",
        "‚ÄúThe art of editing is the art of omission.‚Äù ‚Äì Elia Kazan",
        "‚ÄúI‚Äôm convinced that nothing happens in the editing room.‚Äù ‚Äì Francis Ford Coppola",
        "‚ÄúMay your edits be as magical as pixie dust.‚Äù ‚Äì Inspired by Disney",
        "‚ÄúIf you can dream it, you can do it.‚Äù ‚Äì Walt Disney"
      ];
    </script>
  </body>
</html>
